{
	"httpRequest": {
		"method": "POST",
		"path": "/v1/messages",
		"body": {
			"contentType": "application/json",
			"type": "JSON",
			"json": {
				"model": "claude-sonnet-4-5-20250929",
				"temperature": 0,
				"stream": false,
				"max_tokens": 16000,
				"tools": [
					{
						"name": "extract",
						"description": "The complete updated parameters object for the node. Must include only parameters from <node_properties_definition>, for example For example: { \"parameters\": { \"method\": \"POST\", \"url\": \"https://api.example.com\", \"sendHeaders\": true, \"headerParameters\": { \"parameters\": [{ \"name\": \"Content-Type\", \"value\": \"application/json\" }] } } }}",
						"input_schema": {
							"type": "object",
							"properties": {
								"parameters": {
									"type": "object",
									"properties": {},
									"additionalProperties": true,
									"description": "The complete updated parameters object for the node. This should be a JSON object that matches the node's parameter structure. Include ALL existing parameters plus the requested changes."
								}
							},
							"required": ["parameters"],
							"additionalProperties": false,
							"description": "The complete updated parameters object for the node. Must include only parameters from <node_properties_definition>, for example For example: { \"parameters\": { \"method\": \"POST\", \"url\": \"https://api.example.com\", \"sendHeaders\": true, \"headerParameters\": { \"parameters\": [{ \"name\": \"Content-Type\", \"value\": \"application/json\" }] } } }}",
							"$schema": "http://json-schema.org/draft-07/schema#"
						}
					}
				],
				"tool_choice": {
					"type": "tool",
					"name": "extract"
				},
				"thinking": {
					"type": "disabled"
				},
				"messages": [
					{
						"role": "user",
						"content": [
							{
								"type": "text",
								"text": "\nThe node accepts these properties:\n<node_properties_definition>\n[\n  {\n    \"displayName\": \"\",\n    \"name\": \"curlImport\",\n    \"type\": \"curlImport\",\n    \"default\": \"\"\n  },\n  {\n    \"displayName\": \"Method\",\n    \"name\": \"method\",\n    \"type\": \"options\",\n    \"options\": [\n      {\n        \"name\": \"DELETE\",\n        \"value\": \"DELETE\"\n      },\n      {\n        \"name\": \"GET\",\n        \"value\": \"GET\"\n      },\n      {\n        \"name\": \"HEAD\",\n        \"value\": \"HEAD\"\n      },\n      {\n        \"name\": \"OPTIONS\",\n        \"value\": \"OPTIONS\"\n      },\n      {\n        \"name\": \"PATCH\",\n        \"value\": \"PATCH\"\n      },\n      {\n        \"name\": \"POST\",\n        \"value\": \"POST\"\n      },\n      {\n        \"name\": \"PUT\",\n        \"value\": \"PUT\"\n      }\n    ],\n    \"default\": \"GET\",\n    \"description\": \"The request method to use\"\n  },\n  {\n    \"displayName\": \"URL\",\n    \"name\": \"url\",\n    \"type\": \"string\",\n    \"default\": \"\",\n    \"placeholder\": \"http://example.com/index.html\",\n    \"description\": \"The URL to make the request to\",\n    \"required\": true\n  },\n  {\n    \"displayName\": \"Authentication\",\n    \"name\": \"authentication\",\n    \"noDataExpression\": true,\n    \"type\": \"options\",\n    \"options\": [\n      {\n        \"name\": \"None\",\n        \"value\": \"none\"\n      },\n      {\n        \"name\": \"Predefined Credential Type\",\n        \"value\": \"predefinedCredentialType\",\n        \"description\": \"We've already implemented auth for many services so that you don't have to set it up manually\"\n      },\n      {\n        \"name\": \"Generic Credential Type\",\n        \"value\": \"genericCredentialType\",\n        \"description\": \"Fully customizable. Choose between basic, header, OAuth2, etc.\"\n      }\n    ],\n    \"default\": \"none\"\n  },\n  {\n    \"displayName\": \"Credential Type\",\n    \"name\": \"nodeCredentialType\",\n    \"type\": \"credentialsSelect\",\n    \"noDataExpression\": true,\n    \"required\": true,\n    \"default\": \"\",\n    \"credentialTypes\": [\n      \"extends:oAuth2Api\",\n      \"extends:oAuth1Api\",\n      \"has:authenticate\"\n    ],\n    \"displayOptions\": {\n      \"show\": {\n        \"authentication\": [\n          \"predefinedCredentialType\"\n        ]\n      }\n    }\n  },\n  {\n    \"displayName\": \"Make sure you have specified the scope(s) for the Service Account in the credential\",\n    \"name\": \"googleApiWarning\",\n    \"type\": \"notice\",\n    \"default\": \"\",\n    \"displayOptions\": {\n      \"show\": {\n        \"nodeCredentialType\": [\n          \"googleApi\"\n        ]\n      }\n    }\n  },\n  {\n    \"displayName\": \"Generic Auth Type\",\n    \"name\": \"genericAuthType\",\n    \"type\": \"credentialsSelect\",\n    \"required\": true,\n    \"default\": \"\",\n    \"credentialTypes\": [\n      \"has:genericAuth\"\n    ],\n    \"displayOptions\": {\n      \"show\": {\n        \"authentication\": [\n          \"genericCredentialType\"\n        ]\n      }\n    }\n  },\n  {\n    \"displayName\": \"SSL Certificates\",\n    \"name\": \"provideSslCertificates\",\n    \"type\": \"boolean\",\n    \"default\": false,\n    \"isNodeSetting\": true\n  },\n  {\n    \"displayName\": \"Provide certificates in node's 'Credential for SSL Certificates' parameter\",\n    \"name\": \"provideSslCertificatesNotice\",\n    \"type\": \"notice\",\n    \"default\": \"\",\n    \"isNodeSetting\": true,\n    \"displayOptions\": {\n      \"show\": {\n        \"provideSslCertificates\": [\n          true\n        ]\n      }\n    }\n  },\n  {\n    \"displayName\": \"SSL Certificate\",\n    \"name\": \"sslCertificate\",\n    \"type\": \"credentials\",\n    \"default\": \"\",\n    \"displayOptions\": {\n      \"show\": {\n        \"provideSslCertificates\": [\n          true\n        ]\n      }\n    }\n  },\n  {\n    \"displayName\": \"Send Query Parameters\",\n    \"name\": \"sendQuery\",\n    \"type\": \"boolean\",\n    \"default\": false,\n    \"noDataExpression\": true,\n    \"description\": \"Whether the request has query params or not\"\n  },\n  {\n    \"displayName\": \"Specify Query Parameters\",\n    \"name\": \"specifyQuery\",\n    \"type\": \"options\",\n    \"displayOptions\": {\n      \"show\": {\n        \"sendQuery\": [\n          true\n        ]\n      }\n    },\n    \"options\": [\n      {\n        \"name\": \"Using Fields Below\",\n        \"value\": \"keypair\"\n      },\n      {\n        \"name\": \"Using JSON\",\n        \"value\": \"json\"\n      }\n    ],\n    \"default\": \"keypair\"\n  },\n  {\n    \"displayName\": \"Query Parameters\",\n    \"name\": \"queryParameters\",\n    \"type\": \"fixedCollection\",\n    \"displayOptions\": {\n      \"show\": {\n        \"sendQuery\": [\n          true\n        ],\n        \"specifyQuery\": [\n          \"keypair\"\n        ]\n      }\n    },\n    \"typeOptions\": {\n      \"multipleValues\": true,\n      \"fixedCollection\": {\n        \"itemTitle\": \"={{ $collection.item.value.name }}\"\n      }\n    },\n    \"placeholder\": \"Add Query Parameter\",\n    \"default\": {\n      \"parameters\": [\n        {\n          \"name\": \"\",\n          \"value\": \"\"\n        }\n      ]\n    },\n    \"options\": [\n      {\n        \"name\": \"parameters\",\n        \"displayName\": \"Query Parameter\",\n        \"values\": [\n          {\n            \"displayName\": \"Name\",\n            \"name\": \"name\",\n            \"type\": \"string\",\n            \"default\": \"\"\n          },\n          {\n            \"displayName\": \"Value\",\n            \"name\": \"value\",\n            \"type\": \"string\",\n            \"default\": \"\"\n          }\n        ]\n      }\n    ]\n  },\n  {\n    \"displayName\": \"JSON\",\n    \"name\": \"jsonQuery\",\n    \"type\": \"json\",\n    \"displayOptions\": {\n      \"show\": {\n        \"sendQuery\": [\n          true\n        ],\n        \"specifyQuery\": [\n          \"json\"\n        ]\n      }\n    },\n    \"default\": \"\"\n  },\n  {\n    \"displayName\": \"Send Headers\",\n    \"name\": \"sendHeaders\",\n    \"type\": \"boolean\",\n    \"default\": false,\n    \"noDataExpression\": true,\n    \"description\": \"Whether the request has headers or not\"\n  },\n  {\n    \"displayName\": \"Specify Headers\",\n    \"name\": \"specifyHeaders\",\n    \"type\": \"options\",\n    \"displayOptions\": {\n      \"show\": {\n        \"sendHeaders\": [\n          true\n        ]\n      }\n    },\n    \"options\": [\n      {\n        \"name\": \"Using Fields Below\",\n        \"value\": \"keypair\"\n      },\n      {\n        \"name\": \"Using JSON\",\n        \"value\": \"json\"\n      }\n    ],\n    \"default\": \"keypair\"\n  },\n  {\n    \"displayName\": \"Headers\",\n    \"name\": \"headerParameters\",\n    \"type\": \"fixedCollection\",\n    \"displayOptions\": {\n      \"show\": {\n        \"sendHeaders\": [\n          true\n        ],\n        \"specifyHeaders\": [\n          \"keypair\"\n        ]\n      }\n    },\n    \"typeOptions\": {\n      \"multipleValues\": true,\n      \"fixedCollection\": {\n        \"itemTitle\": \"={{ $collection.item.value.name }}\"\n      }\n    },\n    \"placeholder\": \"Add Header\",\n    \"default\": {\n      \"parameters\": [\n        {\n          \"name\": \"\",\n          \"value\": \"\"\n        }\n      ]\n    },\n    \"options\": [\n      {\n        \"name\": \"parameters\",\n        \"displayName\": \"Header\",\n        \"values\": [\n          {\n            \"displayName\": \"Name\",\n            \"name\": \"name\",\n            \"type\": \"string\",\n            \"default\": \"\"\n          },\n          {\n            \"displayName\": \"Value\",\n            \"name\": \"value\",\n            \"type\": \"string\",\n            \"default\": \"\"\n          }\n        ]\n      }\n    ]\n  },\n  {\n    \"displayName\": \"JSON\",\n    \"name\": \"jsonHeaders\",\n    \"type\": \"json\",\n    \"displayOptions\": {\n      \"show\": {\n        \"sendHeaders\": [\n          true\n        ],\n        \"specifyHeaders\": [\n          \"json\"\n        ]\n      }\n    },\n    \"default\": \"\"\n  },\n  {\n    \"displayName\": \"Send Body\",\n    \"name\": \"sendBody\",\n    \"type\": \"boolean\",\n    \"default\": false,\n    \"noDataExpression\": true,\n    \"description\": \"Whether the request has a body or not\"\n  },\n  {\n    \"displayName\": \"Body Content Type\",\n    \"name\": \"contentType\",\n    \"type\": \"options\",\n    \"displayOptions\": {\n      \"show\": {\n        \"sendBody\": [\n          true\n        ]\n      }\n    },\n    \"options\": [\n      {\n        \"name\": \"Form Urlencoded\",\n        \"value\": \"form-urlencoded\"\n      },\n      {\n        \"name\": \"Form-Data\",\n        \"value\": \"multipart-form-data\"\n      },\n      {\n        \"name\": \"JSON\",\n        \"value\": \"json\"\n      },\n      {\n        \"name\": \"n8n Binary File\",\n        \"value\": \"binaryData\"\n      },\n      {\n        \"name\": \"Raw\",\n        \"value\": \"raw\"\n      }\n    ],\n    \"default\": \"json\",\n    \"description\": \"Content-Type to use to send body parameters\"\n  },\n  {\n    \"displayName\": \"Specify Body\",\n    \"name\": \"specifyBody\",\n    \"type\": \"options\",\n    \"displayOptions\": {\n      \"show\": {\n        \"sendBody\": [\n          true\n        ],\n        \"contentType\": [\n          \"json\"\n        ]\n      }\n    },\n    \"options\": [\n      {\n        \"name\": \"Using Fields Below\",\n        \"value\": \"keypair\"\n      },\n      {\n        \"name\": \"Using JSON\",\n        \"value\": \"json\"\n      }\n    ],\n    \"default\": \"keypair\",\n    \"description\": \"The body can be specified using explicit fields (<code>keypair</code>) or using a JavaScript object (<code>json</code>)\"\n  },\n  {\n    \"displayName\": \"Body Parameters\",\n    \"name\": \"bodyParameters\",\n    \"type\": \"fixedCollection\",\n    \"displayOptions\": {\n      \"show\": {\n        \"sendBody\": [\n          true\n        ],\n        \"contentType\": [\n          \"json\"\n        ],\n        \"specifyBody\": [\n          \"keypair\"\n        ]\n      }\n    },\n    \"typeOptions\": {\n      \"multipleValues\": true,\n      \"fixedCollection\": {\n        \"itemTitle\": \"={{ $collection.item.value.name }}\"\n      }\n    },\n    \"placeholder\": \"Add Body Field\",\n    \"default\": {\n      \"parameters\": [\n        {\n          \"name\": \"\",\n          \"value\": \"\"\n        }\n      ]\n    },\n    \"options\": [\n      {\n        \"name\": \"parameters\",\n        \"displayName\": \"Body Field\",\n        \"values\": [\n          {\n            \"displayName\": \"Name\",\n            \"name\": \"name\",\n            \"type\": \"string\",\n            \"default\": \"\",\n            \"description\": \"ID of the field to set. Choose from the list, or specify an ID using an <a href=\\\"https://docs.n8n.io/code/expressions/\\\">expression</a>.\"\n          },\n          {\n            \"displayName\": \"Value\",\n            \"name\": \"value\",\n            \"type\": \"string\",\n            \"default\": \"\",\n            \"description\": \"Value of the field to set\"\n          }\n        ]\n      }\n    ]\n  },\n  {\n    \"displayName\": \"JSON\",\n    \"name\": \"jsonBody\",\n    \"type\": \"json\",\n    \"displayOptions\": {\n      \"show\": {\n        \"sendBody\": [\n          true\n        ],\n        \"contentType\": [\n          \"json\"\n        ],\n        \"specifyBody\": [\n          \"json\"\n        ]\n      }\n    },\n    \"default\": \"\"\n  },\n  {\n    \"displayName\": \"Body\",\n    \"name\": \"bodyParameters\",\n    \"type\": \"fixedCollection\",\n    \"displayOptions\": {\n      \"show\": {\n        \"sendBody\": [\n          true\n        ],\n        \"contentType\": [\n          \"multipart-form-data\"\n        ]\n      }\n    },\n    \"typeOptions\": {\n      \"multipleValues\": true,\n      \"fixedCollection\": {\n        \"itemTitle\": \"={{ $collection.item.value.name }}\"\n      }\n    },\n    \"placeholder\": \"Add Body Field\",\n    \"default\": {\n      \"parameters\": [\n        {\n          \"name\": \"\",\n          \"value\": \"\"\n        }\n      ]\n    },\n    \"options\": [\n      {\n        \"name\": \"parameters\",\n        \"displayName\": \"Body Field\",\n        \"values\": [\n          {\n            \"displayName\": \"Type\",\n            \"name\": \"parameterType\",\n            \"type\": \"options\",\n            \"options\": [\n              {\n                \"name\": \"n8n Binary File\",\n                \"value\": \"formBinaryData\"\n              },\n              {\n                \"name\": \"Form Data\",\n                \"value\": \"formData\"\n              }\n            ],\n            \"default\": \"formData\"\n          },\n          {\n            \"displayName\": \"Name\",\n            \"name\": \"name\",\n            \"type\": \"string\",\n            \"default\": \"\",\n            \"description\": \"ID of the field to set. Choose from the list, or specify an ID using an <a href=\\\"https://docs.n8n.io/code/expressions/\\\">expression</a>.\"\n          },\n          {\n            \"displayName\": \"Value\",\n            \"name\": \"value\",\n            \"type\": \"string\",\n            \"displayOptions\": {\n              \"show\": {\n                \"parameterType\": [\n                  \"formData\"\n                ]\n              }\n            },\n            \"default\": \"\",\n            \"description\": \"Value of the field to set\"\n          },\n          {\n            \"displayName\": \"Input Data Field Name\",\n            \"name\": \"inputDataFieldName\",\n            \"type\": \"string\",\n            \"displayOptions\": {\n              \"show\": {\n                \"parameterType\": [\n                  \"formBinaryData\"\n                ]\n              }\n            },\n            \"default\": \"\",\n            \"description\": \"The name of the incoming field containing the binary file data to be processed\"\n          }\n        ]\n      }\n    ]\n  },\n  {\n    \"displayName\": \"Specify Body\",\n    \"name\": \"specifyBody\",\n    \"type\": \"options\",\n    \"displayOptions\": {\n      \"show\": {\n        \"sendBody\": [\n          true\n        ],\n        \"contentType\": [\n          \"form-urlencoded\"\n        ]\n      }\n    },\n    \"options\": [\n      {\n        \"name\": \"Using Fields Below\",\n        \"value\": \"keypair\"\n      },\n      {\n        \"name\": \"Using Single Field\",\n        \"value\": \"string\"\n      }\n    ],\n    \"default\": \"keypair\"\n  },\n  {\n    \"displayName\": \"Body Fields\",\n    \"name\": \"bodyParameters\",\n    \"type\": \"fixedCollection\",\n    \"displayOptions\": {\n      \"show\": {\n        \"sendBody\": [\n          true\n        ],\n        \"contentType\": [\n          \"form-urlencoded\"\n        ],\n        \"specifyBody\": [\n          \"keypair\"\n        ]\n      }\n    },\n    \"typeOptions\": {\n      \"multipleValues\": true,\n      \"fixedCollection\": {\n        \"itemTitle\": \"={{ $collection.item.value.name }}\"\n      }\n    },\n    \"placeholder\": \"Add Field\",\n    \"default\": {\n      \"parameters\": [\n        {\n          \"name\": \"\",\n          \"value\": \"\"\n        }\n      ]\n    },\n    \"options\": [\n      {\n        \"name\": \"parameters\",\n        \"displayName\": \"Field\",\n        \"values\": [\n          {\n            \"displayName\": \"Name\",\n            \"name\": \"name\",\n            \"type\": \"string\",\n            \"default\": \"\",\n            \"description\": \"ID of the field to set. Choose from the list, or specify an ID using an <a href=\\\"https://docs.n8n.io/code/expressions/\\\">expression</a>.\"\n          },\n          {\n            \"displayName\": \"Value\",\n            \"name\": \"value\",\n            \"type\": \"string\",\n            \"default\": \"\",\n            \"description\": \"Value of the field to set\"\n          }\n        ]\n      }\n    ]\n  },\n  {\n    \"displayName\": \"Body\",\n    \"name\": \"body\",\n    \"type\": \"string\",\n    \"displayOptions\": {\n      \"show\": {\n        \"sendBody\": [\n          true\n        ],\n        \"specifyBody\": [\n          \"string\"\n        ]\n      }\n    },\n    \"default\": \"\",\n    \"placeholder\": \"field1=value1&field2=value2\"\n  },\n  {\n    \"displayName\": \"Input Data Field Name\",\n    \"name\": \"inputDataFieldName\",\n    \"type\": \"string\",\n    \"displayOptions\": {\n      \"show\": {\n        \"sendBody\": [\n          true\n        ],\n        \"contentType\": [\n          \"binaryData\"\n        ]\n      }\n    },\n    \"default\": \"\",\n    \"description\": \"The name of the incoming field containing the binary file data to be processed\"\n  },\n  {\n    \"displayName\": \"Content Type\",\n    \"name\": \"rawContentType\",\n    \"type\": \"string\",\n    \"displayOptions\": {\n      \"show\": {\n        \"sendBody\": [\n          true\n        ],\n        \"contentType\": [\n          \"raw\"\n        ]\n      }\n    },\n    \"default\": \"\",\n    \"placeholder\": \"text/html\"\n  },\n  {\n    \"displayName\": \"Body\",\n    \"name\": \"body\",\n    \"type\": \"string\",\n    \"displayOptions\": {\n      \"show\": {\n        \"sendBody\": [\n          true\n        ],\n        \"contentType\": [\n          \"raw\"\n        ]\n      }\n    },\n    \"default\": \"\",\n    \"placeholder\": \"\"\n  },\n  {\n    \"displayName\": \"Options\",\n    \"name\": \"options\",\n    \"type\": \"collection\",\n    \"placeholder\": \"Add option\",\n    \"default\": {},\n    \"options\": [\n      {\n        \"displayName\": \"Batching\",\n        \"name\": \"batching\",\n        \"placeholder\": \"Add Batching\",\n        \"type\": \"fixedCollection\",\n        \"typeOptions\": {\n          \"multipleValues\": false\n        },\n        \"default\": {\n          \"batch\": {}\n        },\n        \"options\": [\n          {\n            \"displayName\": \"Batching\",\n            \"name\": \"batch\",\n            \"values\": [\n              {\n                \"displayName\": \"Items per Batch\",\n                \"name\": \"batchSize\",\n                \"type\": \"number\",\n                \"typeOptions\": {\n                  \"minValue\": -1\n                },\n                \"default\": 50,\n                \"description\": \"Input will be split in batches to throttle requests. -1 for disabled. 0 will be treated as 1.\"\n              },\n              {\n                \"displayName\": \"Batch Interval (ms)\",\n                \"name\": \"batchInterval\",\n                \"type\": \"number\",\n                \"typeOptions\": {\n                  \"minValue\": 0\n                },\n                \"default\": 1000,\n                \"description\": \"Time (in milliseconds) between each batch of requests. 0 for disabled.\"\n              }\n            ]\n          }\n        ]\n      },\n      {\n        \"displayName\": \"Ignore SSL Issues (Insecure)\",\n        \"name\": \"allowUnauthorizedCerts\",\n        \"type\": \"boolean\",\n        \"noDataExpression\": true,\n        \"default\": false,\n        \"description\": \"Whether to download the response even if SSL certificate validation is not possible\"\n      },\n      {\n        \"displayName\": \"Array Format in Query Parameters\",\n        \"name\": \"queryParameterArrays\",\n        \"type\": \"options\",\n        \"displayOptions\": {\n          \"show\": {\n            \"/sendQuery\": [\n              true\n            ]\n          }\n        },\n        \"options\": [\n          {\n            \"name\": \"No Brackets\",\n            \"value\": \"repeat\",\n            \"description\": \"e.g. foo=bar&foo=qux\"\n          },\n          {\n            \"name\": \"Brackets Only\",\n            \"value\": \"brackets\",\n            \"description\": \"e.g. foo[]=bar&foo[]=qux\"\n          },\n          {\n            \"name\": \"Brackets with Indices\",\n            \"value\": \"indices\",\n            \"description\": \"e.g. foo[0]=bar&foo[1]=qux\"\n          }\n        ],\n        \"default\": \"brackets\"\n      },\n      {\n        \"displayName\": \"Lowercase Headers\",\n        \"name\": \"lowercaseHeaders\",\n        \"type\": \"boolean\",\n        \"default\": true,\n        \"description\": \"Whether to lowercase header names\"\n      },\n      {\n        \"displayName\": \"Redirects\",\n        \"name\": \"redirect\",\n        \"placeholder\": \"Add Redirect\",\n        \"type\": \"fixedCollection\",\n        \"typeOptions\": {\n          \"multipleValues\": false\n        },\n        \"default\": {\n          \"redirect\": {}\n        },\n        \"options\": [\n          {\n            \"displayName\": \"Redirect\",\n            \"name\": \"redirect\",\n            \"values\": [\n              {\n                \"displayName\": \"Follow Redirects\",\n                \"name\": \"followRedirects\",\n                \"type\": \"boolean\",\n                \"default\": true,\n                \"noDataExpression\": true,\n                \"description\": \"Whether to follow all redirects\"\n              },\n              {\n                \"displayName\": \"Max Redirects\",\n                \"name\": \"maxRedirects\",\n                \"type\": \"number\",\n                \"displayOptions\": {\n                  \"show\": {\n                    \"followRedirects\": [\n                      true\n                    ]\n                  }\n                },\n                \"default\": 21,\n                \"description\": \"Max number of redirects to follow\"\n              }\n            ]\n          }\n        ],\n        \"displayOptions\": {\n          \"hide\": {\n            \"@version\": [\n              1,\n              2,\n              3\n            ]\n          }\n        }\n      },\n      {\n        \"displayName\": \"Response\",\n        \"name\": \"response\",\n        \"placeholder\": \"Add response\",\n        \"type\": \"fixedCollection\",\n        \"typeOptions\": {\n          \"multipleValues\": false\n        },\n        \"default\": {\n          \"response\": {}\n        },\n        \"options\": [\n          {\n            \"displayName\": \"Response\",\n            \"name\": \"response\",\n            \"values\": [\n              {\n                \"displayName\": \"Include Response Headers and Status\",\n                \"name\": \"fullResponse\",\n                \"type\": \"boolean\",\n                \"default\": false,\n                \"description\": \"Whether to return the full response (headers and response status code) data instead of only the body\"\n              },\n              {\n                \"displayName\": \"Never Error\",\n                \"name\": \"neverError\",\n                \"type\": \"boolean\",\n                \"default\": false,\n                \"description\": \"Whether to succeeds also when status code is not 2xx\"\n              },\n              {\n                \"displayName\": \"Response Format\",\n                \"name\": \"responseFormat\",\n                \"type\": \"options\",\n                \"noDataExpression\": true,\n                \"options\": [\n                  {\n                    \"name\": \"Autodetect\",\n                    \"value\": \"autodetect\"\n                  },\n                  {\n                    \"name\": \"File\",\n                    \"value\": \"file\"\n                  },\n                  {\n                    \"name\": \"JSON\",\n                    \"value\": \"json\"\n                  },\n                  {\n                    \"name\": \"Text\",\n                    \"value\": \"text\"\n                  }\n                ],\n                \"default\": \"autodetect\",\n                \"description\": \"The format in which the data gets returned from the URL\"\n              },\n              {\n                \"displayName\": \"Put Output in Field\",\n                \"name\": \"outputPropertyName\",\n                \"type\": \"string\",\n                \"default\": \"data\",\n                \"required\": true,\n                \"displayOptions\": {\n                  \"show\": {\n                    \"responseFormat\": [\n                      \"file\",\n                      \"text\"\n                    ]\n                  }\n                },\n                \"description\": \"Name of the binary property to which to write the data of the read file\"\n              }\n            ]\n          }\n        ]\n      },\n      {\n        \"displayName\": \"Pagination\",\n        \"name\": \"pagination\",\n        \"placeholder\": \"Add pagination\",\n        \"type\": \"fixedCollection\",\n        \"typeOptions\": {\n          \"multipleValues\": false\n        },\n        \"default\": {\n          \"pagination\": {}\n        },\n        \"options\": [\n          {\n            \"displayName\": \"Pagination\",\n            \"name\": \"pagination\",\n            \"values\": [\n              {\n                \"displayName\": \"Pagination Mode\",\n                \"name\": \"paginationMode\",\n                \"type\": \"options\",\n                \"typeOptions\": {\n                  \"noDataExpression\": true\n                },\n                \"options\": [\n                  {\n                    \"name\": \"Off\",\n                    \"value\": \"off\"\n                  },\n                  {\n                    \"name\": \"Update a Parameter in Each Request\",\n                    \"value\": \"updateAParameterInEachRequest\"\n                  },\n                  {\n                    \"name\": \"Response Contains Next URL\",\n                    \"value\": \"responseContainsNextURL\"\n                  }\n                ],\n                \"default\": \"updateAParameterInEachRequest\",\n                \"description\": \"If pagination should be used\"\n              },\n              {\n                \"displayName\": \"Use the $response variables to access the data of the previous response. Refer to the <a href=\\\"https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.httprequest/#pagination/?utm_source=n8n_app&utm_medium=node_settings_modal-credential_link&utm_campaign=n8n-nodes-base.httprequest\\\" target=\\\"_blank\\\">docs</a> for more info about pagination/\",\n                \"name\": \"webhookNotice\",\n                \"displayOptions\": {\n                  \"hide\": {\n                    \"paginationMode\": [\n                      \"off\"\n                    ]\n                  }\n                },\n                \"type\": \"notice\",\n                \"default\": \"\"\n              },\n              {\n                \"displayName\": \"Next URL\",\n                \"name\": \"nextURL\",\n                \"type\": \"string\",\n                \"displayOptions\": {\n                  \"show\": {\n                    \"paginationMode\": [\n                      \"responseContainsNextURL\"\n                    ]\n                  }\n                },\n                \"default\": \"\",\n                \"description\": \"Should evaluate to the URL of the next page. <a href=\\\"https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.httprequest/#pagination\\\" target=\\\"_blank\\\">More info</a>.\"\n              },\n              {\n                \"displayName\": \"Parameters\",\n                \"name\": \"parameters\",\n                \"type\": \"fixedCollection\",\n                \"displayOptions\": {\n                  \"show\": {\n                    \"paginationMode\": [\n                      \"updateAParameterInEachRequest\"\n                    ]\n                  }\n                },\n                \"typeOptions\": {\n                  \"multipleValues\": true,\n                  \"noExpression\": true,\n                  \"fixedCollection\": {\n                    \"itemTitle\": \"={{ (() => { const name = $collection.item.value.name; if (!name) return \\\"\\\"; const typeName = $collection.item.properties.find(p => p.name === \\\"type\\\").options.find(o => o.value === $collection.item.value.type).name; return typeName + \\\": \\\" + name; })() }}\"\n                  }\n                },\n                \"placeholder\": \"Add Parameter\",\n                \"default\": {\n                  \"parameters\": [\n                    {\n                      \"type\": \"qs\",\n                      \"name\": \"\",\n                      \"value\": \"\"\n                    }\n                  ]\n                },\n                \"options\": [\n                  {\n                    \"name\": \"parameters\",\n                    \"displayName\": \"Parameter\",\n                    \"values\": [\n                      {\n                        \"displayName\": \"Type\",\n                        \"name\": \"type\",\n                        \"type\": \"options\",\n                        \"options\": [\n                          {\n                            \"name\": \"Body\",\n                            \"value\": \"body\"\n                          },\n                          {\n                            \"name\": \"Header\",\n                            \"value\": \"headers\"\n                          },\n                          {\n                            \"name\": \"Query\",\n                            \"value\": \"qs\"\n                          }\n                        ],\n                        \"default\": \"qs\",\n                        \"description\": \"Where the parameter should be set\"\n                      },\n                      {\n                        \"displayName\": \"Name\",\n                        \"name\": \"name\",\n                        \"type\": \"string\",\n                        \"default\": \"\",\n                        \"placeholder\": \"e.g page\"\n                      },\n                      {\n                        \"displayName\": \"Value\",\n                        \"name\": \"value\",\n                        \"type\": \"string\",\n                        \"default\": \"\",\n                        \"hint\": \"Use expression mode and $response to access response data\"\n                      }\n                    ]\n                  }\n                ]\n              },\n              {\n                \"displayName\": \"Pagination Complete When\",\n                \"name\": \"paginationCompleteWhen\",\n                \"type\": \"options\",\n                \"typeOptions\": {\n                  \"noDataExpression\": true\n                },\n                \"displayOptions\": {\n                  \"hide\": {\n                    \"paginationMode\": [\n                      \"off\"\n                    ]\n                  }\n                },\n                \"options\": [\n                  {\n                    \"name\": \"Response Is Empty\",\n                    \"value\": \"responseIsEmpty\"\n                  },\n                  {\n                    \"name\": \"Receive Specific Status Code(s)\",\n                    \"value\": \"receiveSpecificStatusCodes\"\n                  },\n                  {\n                    \"name\": \"Other\",\n                    \"value\": \"other\"\n                  }\n                ],\n                \"default\": \"responseIsEmpty\",\n                \"description\": \"When should no further requests be made?\"\n              },\n              {\n                \"displayName\": \"Status Code(s) when Complete\",\n                \"name\": \"statusCodesWhenComplete\",\n                \"type\": \"string\",\n                \"typeOptions\": {\n                  \"noDataExpression\": true\n                },\n                \"displayOptions\": {\n                  \"show\": {\n                    \"paginationCompleteWhen\": [\n                      \"receiveSpecificStatusCodes\"\n                    ]\n                  }\n                },\n                \"default\": \"\",\n                \"description\": \"Accepts comma-separated values\"\n              },\n              {\n                \"displayName\": \"Complete Expression\",\n                \"name\": \"completeExpression\",\n                \"type\": \"string\",\n                \"displayOptions\": {\n                  \"show\": {\n                    \"paginationCompleteWhen\": [\n                      \"other\"\n                    ]\n                  }\n                },\n                \"default\": \"\",\n                \"description\": \"Should evaluate to true when pagination is complete. <a href=\\\"https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.httprequest/#pagination\\\" target=\\\"_blank\\\">More info</a>.\"\n              },\n              {\n                \"displayName\": \"Limit Pages Fetched\",\n                \"name\": \"limitPagesFetched\",\n                \"type\": \"boolean\",\n                \"typeOptions\": {\n                  \"noDataExpression\": true\n                },\n                \"displayOptions\": {\n                  \"hide\": {\n                    \"paginationMode\": [\n                      \"off\"\n                    ]\n                  }\n                },\n                \"default\": false,\n                \"noDataExpression\": true,\n                \"description\": \"Whether the number of requests should be limited\"\n              },\n              {\n                \"displayName\": \"Max Pages\",\n                \"name\": \"maxRequests\",\n                \"type\": \"number\",\n                \"typeOptions\": {\n                  \"noDataExpression\": true\n                },\n                \"displayOptions\": {\n                  \"show\": {\n                    \"limitPagesFetched\": [\n                      true\n                    ]\n                  }\n                },\n                \"default\": 100,\n                \"description\": \"Maximum amount of request to be make\"\n              },\n              {\n                \"displayName\": \"Interval Between Requests (ms)\",\n                \"name\": \"requestInterval\",\n                \"type\": \"number\",\n                \"displayOptions\": {\n                  \"hide\": {\n                    \"paginationMode\": [\n                      \"off\"\n                    ]\n                  }\n                },\n                \"default\": 0,\n                \"description\": \"Time in milliseconds to wait between requests\",\n                \"hint\": \"At 0 no delay will be added\",\n                \"typeOptions\": {\n                  \"minValue\": 0\n                }\n              }\n            ]\n          }\n        ]\n      },\n      {\n        \"displayName\": \"Proxy\",\n        \"name\": \"proxy\",\n        \"type\": \"string\",\n        \"default\": \"\",\n        \"placeholder\": \"e.g. http://myproxy:3128\",\n        \"description\": \"HTTP proxy to use\"\n      },\n      {\n        \"displayName\": \"Timeout\",\n        \"name\": \"timeout\",\n        \"type\": \"number\",\n        \"typeOptions\": {\n          \"minValue\": 1\n        },\n        \"default\": 10000,\n        \"description\": \"Time in ms to wait for the server to send response headers (and start the response body) before aborting the request\"\n      },\n      {\n        \"displayName\": \"Send Credentials on Cross-Origin Redirect\",\n        \"name\": \"sendCredentialsOnCrossOriginRedirect\",\n        \"type\": \"boolean\",\n        \"default\": false,\n        \"description\": \"Whether to send credentials, like the \\\"Authorization\\\" header, on redirects to a different origin\"\n      }\n    ]\n  },\n  {\n    \"displayName\": \"Optimize Response\",\n    \"name\": \"optimizeResponse\",\n    \"type\": \"boolean\",\n    \"default\": false,\n    \"noDataExpression\": true,\n    \"description\": \"Whether the optimize the tool response to reduce amount of data passed to the LLM that could lead to better result and reduce cost\",\n    \"displayOptions\": {\n      \"show\": {\n        \"@tool\": [\n          true\n        ]\n      }\n    }\n  },\n  {\n    \"displayName\": \"Expected Response Type\",\n    \"name\": \"responseType\",\n    \"type\": \"options\",\n    \"displayOptions\": {\n      \"show\": {\n        \"optimizeResponse\": [\n          true\n        ],\n        \"@tool\": [\n          true\n        ]\n      }\n    },\n    \"options\": [\n      {\n        \"name\": \"JSON\",\n        \"value\": \"json\"\n      },\n      {\n        \"name\": \"HTML\",\n        \"value\": \"html\"\n      },\n      {\n        \"name\": \"Text\",\n        \"value\": \"text\"\n      }\n    ],\n    \"default\": \"json\"\n  },\n  {\n    \"displayName\": \"Field Containing Data\",\n    \"name\": \"dataField\",\n    \"type\": \"string\",\n    \"default\": \"\",\n    \"placeholder\": \"e.g. records\",\n    \"description\": \"Specify the name of the field in the response containing the data\",\n    \"hint\": \"leave blank to use whole response\",\n    \"requiresDataPath\": \"single\",\n    \"displayOptions\": {\n      \"show\": {\n        \"optimizeResponse\": [\n          true\n        ],\n        \"responseType\": [\n          \"json\"\n        ],\n        \"@tool\": [\n          true\n        ]\n      }\n    }\n  },\n  {\n    \"displayName\": \"Include Fields\",\n    \"name\": \"fieldsToInclude\",\n    \"type\": \"options\",\n    \"description\": \"What fields response object should include\",\n    \"default\": \"all\",\n    \"displayOptions\": {\n      \"show\": {\n        \"optimizeResponse\": [\n          true\n        ],\n        \"responseType\": [\n          \"json\"\n        ],\n        \"@tool\": [\n          true\n        ]\n      }\n    },\n    \"options\": [\n      {\n        \"name\": \"All\",\n        \"value\": \"all\",\n        \"description\": \"Include all fields\"\n      },\n      {\n        \"name\": \"Selected\",\n        \"value\": \"selected\",\n        \"description\": \"Include only fields specified below\"\n      },\n      {\n        \"name\": \"Except\",\n        \"value\": \"except\",\n        \"description\": \"Exclude fields specified below\"\n      }\n    ]\n  },\n  {\n    \"displayName\": \"Fields\",\n    \"name\": \"fields\",\n    \"type\": \"string\",\n    \"default\": \"\",\n    \"placeholder\": \"e.g. field1,field2\",\n    \"description\": \"Comma-separated list of the field names. Supports dot notation. You can drag the selected fields from the input panel.\",\n    \"requiresDataPath\": \"multiple\",\n    \"displayOptions\": {\n      \"show\": {\n        \"optimizeResponse\": [\n          true\n        ],\n        \"responseType\": [\n          \"json\"\n        ],\n        \"@tool\": [\n          true\n        ]\n      },\n      \"hide\": {\n        \"fieldsToInclude\": [\n          \"all\"\n        ]\n      }\n    }\n  },\n  {\n    \"displayName\": \"Selector (CSS)\",\n    \"name\": \"cssSelector\",\n    \"type\": \"string\",\n    \"description\": \"Select specific element(e.g. body) or multiple elements(e.g. div) of chosen type in the response HTML.\",\n    \"placeholder\": \"e.g. body\",\n    \"default\": \"body\",\n    \"displayOptions\": {\n      \"show\": {\n        \"optimizeResponse\": [\n          true\n        ],\n        \"responseType\": [\n          \"html\"\n        ],\n        \"@tool\": [\n          true\n        ]\n      }\n    }\n  },\n  {\n    \"displayName\": \"Return Only Content\",\n    \"name\": \"onlyContent\",\n    \"type\": \"boolean\",\n    \"default\": false,\n    \"description\": \"Whether to return only content of html elements, stripping html tags and attributes\",\n    \"hint\": \"Uses less tokens and may be easier for model to understand\",\n    \"displayOptions\": {\n      \"show\": {\n        \"optimizeResponse\": [\n          true\n        ],\n        \"responseType\": [\n          \"html\"\n        ],\n        \"@tool\": [\n          true\n        ]\n      }\n    }\n  },\n  {\n    \"displayName\": \"Elements To Omit\",\n    \"name\": \"elementsToOmit\",\n    \"type\": \"string\",\n    \"displayOptions\": {\n      \"show\": {\n        \"optimizeResponse\": [\n          true\n        ],\n        \"responseType\": [\n          \"html\"\n        ],\n        \"onlyContent\": [\n          true\n        ],\n        \"@tool\": [\n          true\n        ]\n      }\n    },\n    \"default\": \"\",\n    \"placeholder\": \"e.g. img, .className, #ItemId\",\n    \"description\": \"Comma-separated list of selectors that would be excluded when extracting content\"\n  },\n  {\n    \"displayName\": \"Truncate Response\",\n    \"name\": \"truncateResponse\",\n    \"type\": \"boolean\",\n    \"default\": false,\n    \"hint\": \"Helps save tokens\",\n    \"displayOptions\": {\n      \"show\": {\n        \"optimizeResponse\": [\n          true\n        ],\n        \"responseType\": [\n          \"text\",\n          \"html\"\n        ],\n        \"@tool\": [\n          true\n        ]\n      }\n    }\n  },\n  {\n    \"displayName\": \"Max Response Characters\",\n    \"name\": \"maxLength\",\n    \"type\": \"number\",\n    \"default\": 1000,\n    \"typeOptions\": {\n      \"minValue\": 1\n    },\n    \"displayOptions\": {\n      \"show\": {\n        \"optimizeResponse\": [\n          true\n        ],\n        \"responseType\": [\n          \"text\",\n          \"html\"\n        ],\n        \"truncateResponse\": [\n          true\n        ],\n        \"@tool\": [\n          true\n        ]\n      }\n    }\n  },\n  {\n    \"displayName\": \"You can view the raw requests this node makes in your browser's developer console\",\n    \"name\": \"infoMessage\",\n    \"type\": \"notice\",\n    \"default\": \"\"\n  }\n]\n</node_properties_definition>",
								"cache_control": {
									"type": "ephemeral"
								}
							},
							{
								"type": "text",
								"text": "<instance_url>\nThe n8n instance base URL is: http://localhost:TEST_PORT\n\nThis URL is essential for webhook nodes and chat triggers as it provides the base URL for:\n- Webhook URLs that external services need to call\n- Chat trigger URLs for conversational interfaces\n- Any node that requires the full instance URL to generate proper callback URLs\n\nWhen working with webhook or chat trigger nodes, use this URL as the base for constructing proper endpoint URLs.\n</instance_url>"
							}
						]
					},
					{
						"role": "user",
						"content": "\n<current_workflow_json>\n{\"nodes\":[{\"id\":\"node-00000000\",\"name\":\"Daily 8pm Trigger\",\"type\":\"n8n-nodes-base.scheduleTrigger\",\"typeVersion\":1.3,\"position\":[250,450],\"parameters\":{}},{\"id\":\"node-00000001\",\"name\":\"Fetch AI News from NewsAPI\",\"type\":\"n8n-nodes-base.httpRequest\",\"typeVersion\":4.4,\"position\":[250,300],\"parameters\":{}},{\"id\":\"node-00000002\",\"name\":\"Top 5 Articles\",\"type\":\"n8n-nodes-base.limit\",\"typeVersion\":1,\"position\":[250,300],\"parameters\":{}},{\"id\":\"node-00000003\",\"name\":\"Extract Top Article\",\"type\":\"n8n-nodes-base.set\",\"typeVersion\":3.4,\"position\":[250,300],\"parameters\":{}}],\"connections\":{},\"name\":\"Daily AI News Digest with Image and Telegram Notification\"}\n</current_workflow_json>\n\n<current_simplified_execution_data>\nNO EXECUTION DATA YET\n</current_simplified_execution_data>\n\n<current_execution_nodes_schemas>\nNO SCHEMA\n</current_execution_nodes_schemas>\n\n<selected_node>\nName: Fetch AI News from NewsAPI\nType: n8n-nodes-base.httpRequest\n\nCurrent Parameters: {}\n</selected_node>\n\n<requested_changes>\n1. Set the URL to https://newsapi.org/v2/everything\n2. Set the method to GET\n3. Add query parameter 'q' with value 'AI OR artificial intelligence'\n4. Add query parameter 'from' with value ={{ $now.minus({days: 1}).toFormat('yyyy-MM-dd') }}\n5. Add query parameter 'to' with value ={{ $now.toFormat('yyyy-MM-dd') }}\n6. Add query parameter 'sortBy' with value 'popularity'\n7. Add query parameter 'language' with value 'en'\n</requested_changes>\n\nBased on the requested changes and the node's property definitions, return the complete updated parameters object."
					}
				],
				"system": [
					{
						"type": "text",
						"text": "<core_instructions>\nYou are an expert n8n workflow architect who updates node parameters based on natural language instructions.\n\n## Your Task\nUpdate the parameters of an existing n8n node based on the requested changes. Return the COMPLETE parameters object with both modified and unmodified parameters. Only modify the parameters that are explicitly mentioned in the changes, preserving all other existing parameters exactly as they are.\n\n## Reference Information\nYou will receive:\n1. The original user workflow request\n2. The current workflow JSON\n3. The selected node's current configuration (id, name, type, parameters)\n4. The node type's parameter definitions\n5. Natural language changes to apply\n\n## Parameter Update Guidelines\n1. START WITH CURRENT: If current parameters is empty {}, start with an empty object and add the requested parameters\n2. PRESERVE EXISTING VALUES: Only modify parameters mentioned in the requested changes\n3. MAINTAIN STRUCTURE: Keep the exact parameter structure required by the node type\n4. CHECK FOR RESOURCELOCATOR: If a parameter is type 'resourceLocator' in the node definition, it MUST use the ResourceLocator structure with __rl, mode, and value fields\n5. USE PROPER EXPRESSIONS: Follow n8n expression syntax when referencing other nodes\n6. VALIDATE TYPES: Ensure parameter values match their expected types\n7. HANDLE NESTED PARAMETERS: Correctly update nested structures like headers, conditions, etc.\n8. SIMPLE VALUES: For simple parameter updates like \"Set X to Y\", directly set the parameter without unnecessary nesting\n9. GENERATE IDS: When adding new items to arrays (like assignments, headers, etc.), generate unique IDs using a simple pattern like \"id-1\", \"id-2\", etc.\n10. TOOL NODE DETECTION: Check if node type ends with \"Tool\" to determine if $fromAI expressions are available\n11. PLACEHOLDER FORMAT: When changes specify a placeholder, copy it exactly as \"<__PLACEHOLDER_VALUE__VALUE_LABEL__>\" (no extra quotes or expressions) and keep VALUE_LABEL descriptive for the user\n</core_instructions>\n\n<expression_rules>\n\n## CRITICAL: Correctly Formatting n8n Expressions\nWhen using expressions to reference data from other nodes:\n- ALWAYS use the format: `={{ $('Node Name').item.json.field }}`\n- NEVER omit the equals sign before the double curly braces\n- ALWAYS use DOUBLE curly braces, never single\n- NEVER use emojis or special characters inside expressions as they will break the expression\n- INCORRECT: `{ $('Node Name').item.json.field }` (missing =, single braces)\n- INCORRECT: `{{ $('Node Name').item.json.field }}` (missing =)\n- INCORRECT: `={{ $('üëç Node').item.json.field }}` (contains emoji)\n- CORRECT: `={{ $('Previous Node').item.json.field }}`\n</expression_rules>\n\n<guide_n8n_nodes_base_httprequest>\n\n### HTTP Request Node Updates\n\n#### IMPORTANT - Credential Security\n\n**NEVER hardcode credentials** (API keys, tokens, passwords, secrets) in the HTTP Request node parameters.\nInstead, ALWAYS use n8n's built-in credential system:\n\n1. Set `authentication` to `\"genericCredentialType\"`\n2. Set `genericAuthType` to the appropriate credential type:\n   - `\"httpHeaderAuth\"` - For API keys sent in headers (X-API-Key, Authorization, etc.)\n   - `\"httpBearerAuth\"` - For Bearer token authentication\n   - `\"httpQueryAuth\"` - For API keys sent as query parameters\n   - `\"httpBasicAuth\"` - For username/password authentication\n   - `\"oAuth2Api\"` - For OAuth 2.0 authentication\n\n**DO NOT:**\n- Put API keys or tokens directly in header values\n- Store credentials in Set nodes and reference them with expressions\n- Hardcode Bearer tokens in Authorization headers\n\n**DO:**\n- Use the authentication parameter with the appropriate credential type\n- Let users configure their credentials securely in n8n's credential manager\n\n#### Common Parameters\n- **url**: The endpoint URL (can use expressions)\n- **method**: GET, POST, PUT, DELETE, PATCH, HEAD, OPTIONS\n- **authentication**: Type of auth (none, genericCredentialType, etc.)\n- **sendHeaders**: Boolean to enable custom headers\n- **headerParameters**: Array of header key-value pairs\n- **sendBody**: Boolean to enable request body (for POST/PUT/PATCH)\n- **bodyParameters**: Array of body parameters or raw body content\n- **contentType**: json, form, raw, etc.\n- **options**: Additional options like timeout, proxy, etc.\n\n#### Header Structure\n{\n  \"sendHeaders\": true,\n  \"headerParameters\": {\n    \"parameters\": [\n      {\n        \"name\": \"Header-Name\",\n        \"value\": \"Header Value or {{ expression }}\"\n      }\n    ]\n  }\n}\n\n#### Body Structure (JSON)\n{\n  \"sendBody\": true,\n  \"contentType\": \"json\",\n  \"bodyParameters\": {\n    \"parameters\": [\n      {\n        \"name\": \"fieldName\",\n        \"value\": \"fieldValue or {{ expression }}\"\n      }\n    ]\n  }\n}\n\n#### Authentication Options\n- **none**: No authentication\n- **genericCredentialType**: Use stored credentials\n- **predefinedCredentialType**: Use specific credential type\n- Can also set custom auth headers\n\n#### Common Patterns\n1. **Adding API Key Header**:\n   - Enable sendHeaders\n   - Add header with name \"X-API-Key\" or \"Authorization\"\n\n2. **Setting Request Body**:\n   - Enable sendBody\n   - Set contentType (usually \"json\")\n   - Add parameters to bodyParameters.parameters array\n\n3. **Dynamic URLs**:\n   - Can use expressions: \"=https://api.example.com/{{ $('Set').item.json.endpoint }}\"\n   - Can reference previous node data\n\n4. **Query Parameters**:\n   - Can be part of URL or set in options.queryParameters\n\n#### Example: HTTP Request with Authentication and Body\nCurrent Parameters:\n{\n  \"method\": \"GET\",\n  \"url\": \"https://api.example.com/data\"\n}\n\nRequested Changes:\n- Change to POST method\n- Add API key authentication (using n8n credentials)\n- Add JSON body with user ID and status\n\nExpected Output:\n{\n  \"method\": \"POST\",\n  \"url\": \"https://api.example.com/data\",\n  \"authentication\": \"genericCredentialType\",\n  \"genericAuthType\": \"httpHeaderAuth\",\n  \"sendHeaders\": true,\n  \"headerParameters\": {\n    \"parameters\": [\n      {\n        \"name\": \"Content-Type\",\n        \"value\": \"application/json\"\n      }\n    ]\n  },\n  \"sendBody\": true,\n  \"contentType\": \"json\",\n  \"bodyParameters\": {\n    \"parameters\": [\n      {\n        \"name\": \"userId\",\n        \"value\": \"={{ $('Previous Node').item.json.id }}\"\n      },\n      {\n        \"name\": \"status\",\n        \"value\": \"active\"\n      }\n    ]\n  },\n  \"options\": {}\n}\n\nNote: The API key is handled by the httpHeaderAuth credential, NOT hardcoded in the header parameters.\nThe user will configure their API key securely in n8n's credential manager.\n</guide_n8n_nodes_base_httprequest>\n\n<guide>\n\n## IMPORTANT: ResourceLocator Parameter Handling\n\nResourceLocator parameters are special fields used for selecting resources like Slack channels, Google Drive files, Notion pages, etc. They MUST have a specific structure:\n\n### Required ResourceLocator Structure (required fields):\n```json\n{\n  \"__rl\": true,\n  \"mode\": \"id\" | \"url\" | \"list\" | \"name\",\n  \"value\": \"the-actual-value\"\n}\n```\n\n### Mode Detection Guidelines:\n- Use the node type definition to determine the default mode and available modes for specific parameter\n- Prefer default mode from node type definition when possible\n- Switch the mode based on the input value format when necessary\n- Use mode \"list\" when the value is an ID + display name (e.g. \"Marketing Team (ID: C0122KQ70S7E)\"). Value should be set to the ID part, and cachedResultName to the display name part\n- Use mode \"url\" when the value is a URL (starts with http:// or https://)\n- Use mode \"id\" when the value looks like an ID (alphanumeric string, UUID, or other identifier)\n\nList mode structure with optional cached fields:\n```json\n{\n  \"__rl\": true,\n  \"mode\": \"list\",\n  \"value\": \"actual-id-from-list\",\n  \"cachedResultName\": \"Display Name\"\n}\n```\n\n</guide>\n\n<guide>\n\n## Text Field Expression Formatting\n\n### PREFERRED METHOD: Embedding expressions directly within text\n```\n\"text\": \"=ALERT: It is currently {{ $('Weather Node').item.json.weather }} in {{ $('Weather Node').item.json.city }}!\"\n```\n\n### Alternative method: Using string concatenation (use only when needed)\n```\n\"text\": \"={{ 'ALERT: It is currently ' + $('Weather Node').item.json.weather + ' in ' + $('Weather Node').item.json.city + '!' }}\"\n```\n\n### Key Points:\n- Use the embedded expression format when mixing static text with dynamic values\n- The entire string must start with = when using expressions\n- Expressions within text use single curly braces {{ }}\n- The outer expression wrapper uses double curly braces ={{ }}\n</guide>\n\n<guide>\n\n### Referencing Output from Special Node Types\n\n#### AI Agent Output Structure\nAI Agent nodes (n8n-nodes-langchain.agent) wrap their response in an \"output\" object:\n- Without Structured Output Parser: Use `$json.output` to access the response string\n- With Structured Output Parser (hasOutputParser: true in node settings): Use `$json.output.fieldName` to access parsed fields\n- Use `$('AI Agent').item.json.output.fieldName` when referencing a node, instead of `$('AI Agent').item.json.fieldName`\n- WRONG: `$json.summary` ‚Üí CORRECT: `$json.output.summary`\n\n#### Webhook Node Output Structure\nWhen referencing data from a Webhook node (n8n-nodes-base.webhook), the incoming request is structured under `$json`:\n- `$json.headers` - HTTP headers, example: `$json.headers.authorization`\n- `$json.params` - URL path parameters, example route: `/users/:id`, access: `$json.params.id`\n- `$json.query` - Query string parameters, example URL: `?user_id=123`, access: `$json.query.user_id`\n- `$json.body` - Request payload, example JSON: `{ \"userName\": \"sam\" }`, access: `$json.body.userName`\n\nCRITICAL: When referencing data from a Webhook node, do NOT use `$json.fieldName` directly - always specify the container (body, query, params, or headers).\n</guide>\n\n<common_patterns>\n\n## Common Parameter Update Patterns\n\n### HTTP Request Node Updates\n- URL: Set directly or use expressions\n- Method: GET, POST, PUT, DELETE, etc.\n- Headers: Add/update in headerParameters.parameters array\n- Body: Update bodyParameters.parameters for POST/PUT\n- Authentication: Update authentication settings\n</common_patterns>\n\n<examples>\n\n## Examples of Parameter Updates\n\n### Example 1: Update HTTP Request URL\nChange: \"Set the URL to call the weather API for London\"\nCurrent parameters: { \"url\": \"https://api.example.com\", \"method\": \"GET\" }\nUpdated parameters: { \"url\": \"https://api.openweathermap.org/data/2.5/weather?q=London\", \"method\": \"GET\" }\n\n### Example 2: Add a header\nChange: \"Add an ABC key header with value 123\"\nCurrent parameters: { \"url\": \"...\", \"sendHeaders\": false }\nUpdated parameters: {\n  \"url\": \"...\",\n  \"sendHeaders\": true,\n  \"headerParameters\": {\n    \"parameters\": [\n      {\n        \"name\": \"ABC\",\n        \"value\": \"123\"\n      }\n    ]\n  }\n}\n\n### Example 3: Update condition\nChange: \"Check if temperature is above 25 degrees\"\nCurrent parameters: { \"conditions\": { \"conditions\": [] } }\nUpdated parameters: {\n  \"conditions\": {\n    \"options\": {\n      \"caseSensitive\": false,\n      \"leftValue\": \"\",\n      \"typeValidation\": \"loose\"\n    },\n    \"conditions\": [\n      {\n        \"leftValue\": \"={{ $('Weather Node').item.json.main.temp }}\",\n        \"rightValue\": 25,\n        \"operator\": {\n          \"type\": \"number\",\n          \"operation\": \"gt\"\n        }\n      }\n    ],\n    \"combinator\": \"and\"\n  }\n}\n\n\n### ResourceLocator Examples\n\n#### Example 1: Slack Node - Channel by ID\nCurrent Parameters:\n{\n  \"select\": \"channel\",\n  \"channelId\": {\n    \"__rl\": true,\n    \"value\": \"\",\n    \"mode\": \"list\"\n  },\n  \"otherOptions\": {}\n}\n\nRequested Changes: Send to channel C0122KQ70S7E\n\nExpected Output:\n{\n  \"select\": \"channel\",\n  \"channelId\": {\n    \"__rl\": true,\n    \"mode\": \"id\",\n    \"value\": \"C0122KQ70S7E\"\n  },\n  \"otherOptions\": {}\n}\n\n#### Example 2: Slack Node - Channel by name\nCurrent Parameters:\n{\n  \"select\": \"channel\",\n  \"channelId\": {\n    \"__rl\": true,\n    \"value\": \"\",\n    \"mode\": \"list\"\n  },\n  \"otherOptions\": {}\n}\n\nRequested Changes: Set channel to general (ID: C0A45D6GBLD)\n\nExpected Output:\n{\n  \"select\": \"channel\",\n  \"channelId\": {\n    \"__rl\": true,\n    \"mode\": \"list\",\n\t\t\"value\": \"C0A45D6GBLD\",\n\t\t\"cachedResultName\": \"general\"\n  },\n  \"otherOptions\": {}\n}\n\n#### Example 3: Google Sheets Node - Spreadsheet by name\nCurrent Parameters:\n{\n  \"operation\": \"read\",\n  \"documentId\": {\n    \"__rl\": true,\n    \"value\": \"\",\n    \"mode\": \"list\"\n  },\n  \"sheetName\": {\n    \"__rl\": true,\n    \"value\": \"\",\n    \"mode\": \"list\"\n  }\n}\n\nRequested Changes: Use the \"Sales Report 2024\" spreadsheet and \"Q1 Data\" sheet\n\nExpected Output:\n{\n  \"operation\": \"read\",\n  \"documentId\": {\n    \"__rl\": true,\n    \"mode\": \"list\",\n    \"value\": \"2wtaOwM07OTFmEijOVvzDAlxtR76hBYVBRlIwuUgDsVE\",\n    \"cachedResultName\": \"Sales Report 2024\",\n    \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/2wtaOwM07OTFmEijOVvzDAlxtR76hBYVBRlIwuUgDsVE/edit?usp=drivesdk\"\n    \n  },\n  \"sheetName\": {\n    \"__rl\": true,\n    \"mode\": \"list\",\n    \"value\": \"gid=0\",\n    \"cachedResultName\": \"Q1 Data\"\n    \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/2wtaOwM07OTFmEijOVvzDAlxtR76hBYVBRlIwuUgDsVE/edit#gid=0\"\n  }\n}\n\n#### Example 4: Google Drive Node - File by URL\nCurrent Parameters:\n{\n  \"operation\": \"download\",\n  \"fileId\": {\n    \"__rl\": true,\n    \"value\": \"\",\n    \"mode\": \"list\"\n  }\n}\n\nRequested Changes: Use file https://drive.google.com/file/d/1ABC123XYZ/view\n\nExpected Output:\n{\n  \"operation\": \"download\",\n  \"fileId\": {\n    \"__rl\": true,\n    \"mode\": \"url\",\n    \"value\": \"https://drive.google.com/file/d/1ABC123XYZ/view\"\n  }\n}\n\n#### Example 5: Notion Node - Page ID from Expression\nCurrent Parameters:\n{\n  \"resource\": \"databasePage\",\n  \"operation\": \"get\",\n  \"pageId\": {\n    \"__rl\": true,\n    \"value\": \"hardcoded-page-id\",\n    \"mode\": \"id\"\n  }\n}\n\nRequested Changes: Use page ID from the previous node's output\n\nExpected Output:\n{\n  \"resource\": \"databasePage\",\n  \"operation\": \"get\",\n  \"pageId\": {\n    \"__rl\": true,\n    \"mode\": \"id\",\n    \"value\": \"={{ $('Previous Node').item.json.pageId }}\"\n  }\n}\n\n#### Example 6: Mode Switch - From ID to List\nCurrent Parameters:\n{\n  \"operation\": \"append\",\n  \"documentId\": {\n    \"__rl\": true,\n    \"value\": \"1ABC123XYZ\",\n    \"mode\": \"id\"\n  }\n}\n\nRequested Changes: Use the \"Customer Database\" (ID: 9XYZ789DEF) spreadsheet\n\nExpected Output:\n{\n  \"operation\": \"append\",\n  \"documentId\": {\n    \"__rl\": true,\n    \"mode\": \"list\",\n    \"value\": \"9XYZ789DEF\",\n    \"cachedResultName\": \"Customer Database\"\n  }\n}\n</examples>\n\n<output_format>\n\n## Output Format\nReturn ONLY the complete updated parameters object that matches the node's parameter structure. Include ALL parameters, both modified and unmodified.\n</output_format>",
						"cache_control": {
							"type": "ephemeral"
						}
					}
				]
			}
		}
	},
	"httpResponse": {
		"statusCode": 200,
		"reasonPhrase": "OK",
		"headers": {
			"strict-transport-security": ["max-age=31536000; includeSubDomains; preload"],
			"X-Robots-Tag": ["none"],
			"Server": ["cloudflare"],
			"Content-Type": ["application/json"],
			"Content-Security-Policy": ["default-src 'none'; frame-ancestors 'none'"]
		},
		"body": {
			"contentType": "application/json",
			"type": "JSON",
			"json": {
				"model": "claude-sonnet-4-5-20250929",
				"id": "msg_014zXrHP2rpVoQfQvfH9jcQo",
				"type": "message",
				"role": "assistant",
				"content": [
					{
						"type": "tool_use",
						"id": "toolu_01WqbhR9ByEzgTgM8Xn8N9qY",
						"name": "extract",
						"input": {
							"parameters": {
								"method": "GET",
								"url": "https://newsapi.org/v2/everything",
								"sendQuery": true,
								"specifyQuery": "keypair",
								"queryParameters": {
									"parameters": [
										{
											"name": "q",
											"value": "AI OR artificial intelligence"
										},
										{
											"name": "from",
											"value": "={{ $now.minus({days: 1}).toFormat('yyyy-MM-dd') }}"
										},
										{
											"name": "to",
											"value": "={{ $now.toFormat('yyyy-MM-dd') }}"
										},
										{
											"name": "sortBy",
											"value": "popularity"
										},
										{
											"name": "language",
											"value": "en"
										}
									]
								},
								"authentication": "none",
								"sendHeaders": false,
								"sendBody": false,
								"options": {}
							}
						}
					}
				],
				"stop_reason": "tool_use",
				"stop_sequence": null,
				"usage": {
					"input_tokens": 625,
					"cache_creation_input_tokens": 0,
					"cache_read_input_tokens": 15606,
					"cache_creation": {
						"ephemeral_5m_input_tokens": 0,
						"ephemeral_1h_input_tokens": 0
					},
					"output_tokens": 275,
					"service_tier": "standard"
				}
			}
		}
	},
	"id": "1770043415981-unknown-host-POST-_v1_messages-6924c55c.json",
	"priority": 0,
	"timeToLive": {
		"unlimited": true
	},
	"times": {
		"unlimited": true
	}
}
