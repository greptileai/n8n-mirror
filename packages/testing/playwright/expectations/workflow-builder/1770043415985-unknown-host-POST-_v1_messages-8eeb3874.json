{
	"httpRequest": {
		"method": "POST",
		"path": "/v1/messages",
		"body": {
			"contentType": "application/json",
			"type": "JSON",
			"json": {
				"model": "claude-sonnet-4-5-20250929",
				"temperature": 0,
				"stream": false,
				"max_tokens": 16000,
				"tools": [
					{
						"name": "extract",
						"description": "The complete updated parameters object for the node. Must include only parameters from <node_properties_definition>, for example For example: { \"parameters\": { \"method\": \"POST\", \"url\": \"https://api.example.com\", \"sendHeaders\": true, \"headerParameters\": { \"parameters\": [{ \"name\": \"Content-Type\", \"value\": \"application/json\" }] } } }}",
						"input_schema": {
							"type": "object",
							"properties": {
								"parameters": {
									"type": "object",
									"properties": {},
									"additionalProperties": true,
									"description": "The complete updated parameters object for the node. This should be a JSON object that matches the node's parameter structure. Include ALL existing parameters plus the requested changes."
								}
							},
							"required": ["parameters"],
							"additionalProperties": false,
							"description": "The complete updated parameters object for the node. Must include only parameters from <node_properties_definition>, for example For example: { \"parameters\": { \"method\": \"POST\", \"url\": \"https://api.example.com\", \"sendHeaders\": true, \"headerParameters\": { \"parameters\": [{ \"name\": \"Content-Type\", \"value\": \"application/json\" }] } } }}",
							"$schema": "http://json-schema.org/draft-07/schema#"
						}
					}
				],
				"tool_choice": {
					"type": "tool",
					"name": "extract"
				},
				"thinking": {
					"type": "disabled"
				},
				"messages": [
					{
						"role": "user",
						"content": [
							{
								"type": "text",
								"text": "\nThe node accepts these properties:\n<node_properties_definition>\n[\n  {\n    \"displayName\": \"Resource\",\n    \"name\": \"resource\",\n    \"type\": \"options\",\n    \"noDataExpression\": true,\n    \"options\": [\n      {\n        \"name\": \"Chat\",\n        \"value\": \"chat\"\n      },\n      {\n        \"name\": \"Callback\",\n        \"value\": \"callback\"\n      },\n      {\n        \"name\": \"File\",\n        \"value\": \"file\"\n      },\n      {\n        \"name\": \"Message\",\n        \"value\": \"message\"\n      }\n    ],\n    \"default\": \"message\"\n  },\n  {\n    \"displayName\": \"Operation\",\n    \"name\": \"operation\",\n    \"type\": \"options\",\n    \"noDataExpression\": true,\n    \"displayOptions\": {\n      \"show\": {\n        \"resource\": [\n          \"message\"\n        ]\n      }\n    },\n    \"options\": [\n      {\n        \"name\": \"Delete Chat Message\",\n        \"value\": \"deleteMessage\",\n        \"description\": \"Delete a chat message\",\n        \"action\": \"Delete a chat message\"\n      },\n      {\n        \"name\": \"Edit Message Text\",\n        \"value\": \"editMessageText\",\n        \"description\": \"Edit a text message\",\n        \"action\": \"Edit a text message\"\n      },\n      {\n        \"name\": \"Pin Chat Message\",\n        \"value\": \"pinChatMessage\",\n        \"description\": \"Pin a chat message\",\n        \"action\": \"Pin a chat message\"\n      },\n      {\n        \"name\": \"Send Animation\",\n        \"value\": \"sendAnimation\",\n        \"description\": \"Send an animated file\",\n        \"action\": \"Send an animated file\"\n      },\n      {\n        \"name\": \"Send Audio\",\n        \"value\": \"sendAudio\",\n        \"description\": \"Send a audio file\",\n        \"action\": \"Send an audio file\"\n      },\n      {\n        \"name\": \"Send Chat Action\",\n        \"value\": \"sendChatAction\",\n        \"description\": \"Send a chat action\",\n        \"action\": \"Send a chat action\"\n      },\n      {\n        \"name\": \"Send Document\",\n        \"value\": \"sendDocument\",\n        \"description\": \"Send a document\",\n        \"action\": \"Send a document\"\n      },\n      {\n        \"name\": \"Send Location\",\n        \"value\": \"sendLocation\",\n        \"description\": \"Send a location\",\n        \"action\": \"Send a location\"\n      },\n      {\n        \"name\": \"Send Media Group\",\n        \"value\": \"sendMediaGroup\",\n        \"description\": \"Send group of photos or videos to album\",\n        \"action\": \"Send a media group message\"\n      },\n      {\n        \"name\": \"Send Message\",\n        \"value\": \"sendMessage\",\n        \"description\": \"Send a text message\",\n        \"action\": \"Send a text message\"\n      },\n      {\n        \"name\": \"Send and Wait for Response\",\n        \"value\": \"sendAndWait\",\n        \"description\": \"Send a message and wait for response\",\n        \"action\": \"Send message and wait for response\"\n      },\n      {\n        \"name\": \"Send Photo\",\n        \"value\": \"sendPhoto\",\n        \"description\": \"Send a photo\",\n        \"action\": \"Send a photo message\"\n      },\n      {\n        \"name\": \"Send Sticker\",\n        \"value\": \"sendSticker\",\n        \"description\": \"Send a sticker\",\n        \"action\": \"Send a sticker\"\n      },\n      {\n        \"name\": \"Send Video\",\n        \"value\": \"sendVideo\",\n        \"description\": \"Send a video\",\n        \"action\": \"Send a video\"\n      },\n      {\n        \"name\": \"Unpin Chat Message\",\n        \"value\": \"unpinChatMessage\",\n        \"description\": \"Unpin a chat message\",\n        \"action\": \"Unpin a chat message\"\n      }\n    ],\n    \"default\": \"sendMessage\"\n  },\n  {\n    \"displayName\": \"Chat ID\",\n    \"name\": \"chatId\",\n    \"type\": \"string\",\n    \"default\": \"\",\n    \"displayOptions\": {\n      \"show\": {\n        \"operation\": [\n          \"administrators\",\n          \"deleteMessage\",\n          \"get\",\n          \"leave\",\n          \"member\",\n          \"pinChatMessage\",\n          \"setDescription\",\n          \"setTitle\",\n          \"sendAnimation\",\n          \"sendAudio\",\n          \"sendChatAction\",\n          \"sendDocument\",\n          \"sendLocation\",\n          \"sendMessage\",\n          \"sendMediaGroup\",\n          \"sendPhoto\",\n          \"sendSticker\",\n          \"sendVideo\",\n          \"unpinChatMessage\"\n        ],\n        \"resource\": [\n          \"chat\",\n          \"message\"\n        ]\n      }\n    },\n    \"required\": true,\n    \"description\": \"Unique identifier for the target chat or username, To find your chat ID ask @get_id_bot\"\n  },\n  {\n    \"displayName\": \"Binary File\",\n    \"name\": \"binaryData\",\n    \"type\": \"boolean\",\n    \"default\": false,\n    \"required\": true,\n    \"displayOptions\": {\n      \"show\": {\n        \"operation\": [\n          \"sendAnimation\",\n          \"sendAudio\",\n          \"sendDocument\",\n          \"sendPhoto\",\n          \"sendVideo\",\n          \"sendSticker\"\n        ],\n        \"resource\": [\n          \"message\"\n        ]\n      }\n    },\n    \"description\": \"Whether the data to upload should be taken from binary field\"\n  },\n  {\n    \"displayName\": \"Input Binary Field\",\n    \"name\": \"binaryPropertyName\",\n    \"type\": \"string\",\n    \"default\": \"data\",\n    \"required\": true,\n    \"hint\": \"The name of the input binary field containing the file to be written\",\n    \"displayOptions\": {\n      \"show\": {\n        \"operation\": [\n          \"sendAnimation\",\n          \"sendAudio\",\n          \"sendDocument\",\n          \"sendPhoto\",\n          \"sendVideo\",\n          \"sendSticker\"\n        ],\n        \"resource\": [\n          \"message\"\n        ],\n        \"binaryData\": [\n          true\n        ]\n      }\n    },\n    \"placeholder\": \"\",\n    \"description\": \"Name of the binary property that contains the data to upload\"\n  },\n  {\n    \"displayName\": \"Photo\",\n    \"name\": \"file\",\n    \"type\": \"string\",\n    \"default\": \"\",\n    \"displayOptions\": {\n      \"show\": {\n        \"operation\": [\n          \"sendPhoto\"\n        ],\n        \"resource\": [\n          \"message\"\n        ],\n        \"binaryData\": [\n          false\n        ]\n      }\n    },\n    \"description\": \"Photo to send. Pass a file_id to send a photo that exists on the Telegram servers (recommended), an HTTP URL for Telegram to get a photo from the Internet.\"\n  },\n  {\n    \"displayName\": \"Reply Markup\",\n    \"name\": \"replyMarkup\",\n    \"displayOptions\": {\n      \"show\": {\n        \"operation\": [\n          \"sendAnimation\",\n          \"sendDocument\",\n          \"sendMessage\",\n          \"sendPhoto\",\n          \"sendSticker\",\n          \"sendVideo\",\n          \"sendAudio\",\n          \"sendLocation\"\n        ],\n        \"resource\": [\n          \"message\"\n        ]\n      }\n    },\n    \"type\": \"options\",\n    \"options\": [\n      {\n        \"name\": \"Force Reply\",\n        \"value\": \"forceReply\"\n      },\n      {\n        \"name\": \"Inline Keyboard\",\n        \"value\": \"inlineKeyboard\"\n      },\n      {\n        \"name\": \"None\",\n        \"value\": \"none\"\n      },\n      {\n        \"name\": \"Reply Keyboard\",\n        \"value\": \"replyKeyboard\"\n      },\n      {\n        \"name\": \"Reply Keyboard Remove\",\n        \"value\": \"replyKeyboardRemove\"\n      }\n    ],\n    \"default\": \"none\",\n    \"description\": \"Additional interface options\"\n  },\n  {\n    \"displayName\": \"Force Reply\",\n    \"name\": \"forceReply\",\n    \"type\": \"collection\",\n    \"placeholder\": \"Add Field\",\n    \"displayOptions\": {\n      \"show\": {\n        \"replyMarkup\": [\n          \"forceReply\"\n        ],\n        \"resource\": [\n          \"message\"\n        ]\n      }\n    },\n    \"default\": {},\n    \"options\": [\n      {\n        \"displayName\": \"Force Reply\",\n        \"name\": \"force_reply\",\n        \"type\": \"boolean\",\n        \"default\": false,\n        \"description\": \"Whether to show reply interface to the user, as if they manually selected the bot‚Äòs message and tapped ‚ÄôReply\"\n      },\n      {\n        \"displayName\": \"Selective\",\n        \"name\": \"selective\",\n        \"type\": \"boolean\",\n        \"default\": false,\n        \"description\": \"Whether to force reply from specific users only\"\n      }\n    ]\n  },\n  {\n    \"displayName\": \"Inline Keyboard\",\n    \"name\": \"inlineKeyboard\",\n    \"placeholder\": \"Add Keyboard Row\",\n    \"description\": \"Adds an inline keyboard that appears right next to the message it belongs to\",\n    \"type\": \"fixedCollection\",\n    \"typeOptions\": {\n      \"multipleValues\": true\n    },\n    \"displayOptions\": {\n      \"show\": {\n        \"replyMarkup\": [\n          \"inlineKeyboard\"\n        ],\n        \"resource\": [\n          \"message\"\n        ]\n      }\n    },\n    \"default\": {},\n    \"options\": [\n      {\n        \"displayName\": \"Rows\",\n        \"name\": \"rows\",\n        \"values\": [\n          {\n            \"displayName\": \"Row\",\n            \"name\": \"row\",\n            \"type\": \"fixedCollection\",\n            \"description\": \"The value to set\",\n            \"placeholder\": \"Add Button\",\n            \"typeOptions\": {\n              \"multipleValues\": true\n            },\n            \"default\": {},\n            \"options\": [\n              {\n                \"displayName\": \"Buttons\",\n                \"name\": \"buttons\",\n                \"values\": [\n                  {\n                    \"displayName\": \"Text\",\n                    \"name\": \"text\",\n                    \"type\": \"string\",\n                    \"default\": \"\",\n                    \"description\": \"Label text on the button\"\n                  },\n                  {\n                    \"displayName\": \"Additional Fields\",\n                    \"name\": \"additionalFields\",\n                    \"type\": \"collection\",\n                    \"placeholder\": \"Add Field\",\n                    \"default\": {},\n                    \"options\": [\n                      {\n                        \"displayName\": \"Callback Data\",\n                        \"name\": \"callback_data\",\n                        \"type\": \"string\",\n                        \"default\": \"\",\n                        \"description\": \"Data to be sent in a callback query to the bot when button is pressed, 1-64 bytes\"\n                      },\n                      {\n                        \"displayName\": \"Pay\",\n                        \"name\": \"pay\",\n                        \"type\": \"boolean\",\n                        \"default\": false,\n                        \"description\": \"Whether to send a Pay button\"\n                      },\n                      {\n                        \"displayName\": \"Switch Inline Query Current Chat\",\n                        \"name\": \"switch_inline_query_current_chat\",\n                        \"type\": \"string\",\n                        \"default\": \"\",\n                        \"description\": \"If set, pressing the button will insert the bot‚Äòs username and the specified inline query in the current chat's input field.Can be empty, in which case only the bot‚Äôs username will be inserted\"\n                      },\n                      {\n                        \"displayName\": \"Switch Inline Query\",\n                        \"name\": \"switch_inline_query\",\n                        \"type\": \"string\",\n                        \"default\": \"\",\n                        \"description\": \"If set, pressing the button will prompt the user to select one of their chats, open that chat and insert the bot‚Äòs username and the specified inline query in the input field. Can be empty, in which case just the bot‚Äôs username will be inserted.\"\n                      },\n                      {\n                        \"displayName\": \"URL\",\n                        \"name\": \"url\",\n                        \"type\": \"string\",\n                        \"default\": \"\",\n                        \"description\": \"HTTP or tg:// URL to be opened when button is pressed\"\n                      },\n                      {\n                        \"displayName\": \"Web App\",\n                        \"name\": \"web_app\",\n                        \"type\": \"collection\",\n                        \"placeholder\": \"Set Telegram Web App URL\",\n                        \"typeOptions\": {\n                          \"multipleValues\": false\n                        },\n                        \"default\": {},\n                        \"options\": [\n                          {\n                            \"displayName\": \"URL\",\n                            \"name\": \"url\",\n                            \"type\": \"string\",\n                            \"default\": \"\",\n                            \"description\": \"An HTTPS URL of a Web App to be opened\"\n                          }\n                        ],\n                        \"description\": \"Launch the Telegram Web App\"\n                      }\n                    ]\n                  }\n                ]\n              }\n            ]\n          }\n        ]\n      }\n    ]\n  },\n  {\n    \"displayName\": \"Reply Keyboard\",\n    \"name\": \"replyKeyboard\",\n    \"placeholder\": \"Add Reply Keyboard Row\",\n    \"description\": \"Adds a custom keyboard with reply options\",\n    \"type\": \"fixedCollection\",\n    \"typeOptions\": {\n      \"multipleValues\": true\n    },\n    \"displayOptions\": {\n      \"show\": {\n        \"replyMarkup\": [\n          \"replyKeyboard\"\n        ]\n      }\n    },\n    \"default\": {},\n    \"options\": [\n      {\n        \"displayName\": \"Rows\",\n        \"name\": \"rows\",\n        \"values\": [\n          {\n            \"displayName\": \"Row\",\n            \"name\": \"row\",\n            \"type\": \"fixedCollection\",\n            \"description\": \"The value to set\",\n            \"placeholder\": \"Add Button\",\n            \"typeOptions\": {\n              \"multipleValues\": true\n            },\n            \"default\": {},\n            \"options\": [\n              {\n                \"displayName\": \"Buttons\",\n                \"name\": \"buttons\",\n                \"values\": [\n                  {\n                    \"displayName\": \"Text\",\n                    \"name\": \"text\",\n                    \"type\": \"string\",\n                    \"default\": \"\",\n                    \"description\": \"Text of the button. If none of the optional fields are used, it will be sent as a message when the button is pressed.\"\n                  },\n                  {\n                    \"displayName\": \"Additional Fields\",\n                    \"name\": \"additionalFields\",\n                    \"type\": \"collection\",\n                    \"placeholder\": \"Add Field\",\n                    \"default\": {},\n                    \"options\": [\n                      {\n                        \"displayName\": \"Request Contact\",\n                        \"name\": \"request_contact\",\n                        \"type\": \"boolean\",\n                        \"default\": false,\n                        \"description\": \"Whether the user's phone number will be sent as a contact when the button is pressed.Available in private chats only\"\n                      },\n                      {\n                        \"displayName\": \"Request Location\",\n                        \"name\": \"request_location\",\n                        \"type\": \"boolean\",\n                        \"default\": false,\n                        \"description\": \"Whether the user's request_location\"\n                      },\n                      {\n                        \"displayName\": \"Web App\",\n                        \"name\": \"web_app\",\n                        \"type\": \"collection\",\n                        \"placeholder\": \"Set Telegram Web App URL\",\n                        \"typeOptions\": {\n                          \"multipleValues\": false\n                        },\n                        \"default\": {},\n                        \"options\": [\n                          {\n                            \"displayName\": \"URL\",\n                            \"name\": \"url\",\n                            \"type\": \"string\",\n                            \"default\": \"\",\n                            \"description\": \"An HTTPS URL of a Web App to be opened\"\n                          }\n                        ],\n                        \"description\": \"Launch the Telegram Web App\"\n                      }\n                    ]\n                  }\n                ]\n              }\n            ]\n          }\n        ]\n      }\n    ]\n  },\n  {\n    \"displayName\": \"Reply Keyboard Options\",\n    \"name\": \"replyKeyboardOptions\",\n    \"type\": \"collection\",\n    \"placeholder\": \"Add option\",\n    \"displayOptions\": {\n      \"show\": {\n        \"replyMarkup\": [\n          \"replyKeyboard\"\n        ]\n      }\n    },\n    \"default\": {},\n    \"options\": [\n      {\n        \"displayName\": \"Resize Keyboard\",\n        \"name\": \"resize_keyboard\",\n        \"type\": \"boolean\",\n        \"default\": false,\n        \"description\": \"Whether to request clients to resize the keyboard vertically for optimal fit\"\n      },\n      {\n        \"displayName\": \"One Time Keyboard\",\n        \"name\": \"one_time_keyboard\",\n        \"type\": \"boolean\",\n        \"default\": false,\n        \"description\": \"Whether to request clients to hide the keyboard as soon as it's been used\"\n      },\n      {\n        \"displayName\": \"Selective\",\n        \"name\": \"selective\",\n        \"type\": \"boolean\",\n        \"default\": false,\n        \"description\": \"Whether to show the keyboard to specific users only\"\n      }\n    ]\n  },\n  {\n    \"displayName\": \"Reply Keyboard Remove\",\n    \"name\": \"replyKeyboardRemove\",\n    \"type\": \"collection\",\n    \"placeholder\": \"Add Field\",\n    \"displayOptions\": {\n      \"show\": {\n        \"replyMarkup\": [\n          \"replyKeyboardRemove\"\n        ]\n      }\n    },\n    \"default\": {},\n    \"options\": [\n      {\n        \"displayName\": \"Remove Keyboard\",\n        \"name\": \"remove_keyboard\",\n        \"type\": \"boolean\",\n        \"default\": false,\n        \"description\": \"Whether to request clients to remove the custom keyboard\"\n      },\n      {\n        \"displayName\": \"Selective\",\n        \"name\": \"selective\",\n        \"type\": \"boolean\",\n        \"default\": false,\n        \"description\": \"Whether to force reply from specific users only\"\n      }\n    ]\n  },\n  {\n    \"displayName\": \"Additional Fields\",\n    \"name\": \"additionalFields\",\n    \"type\": \"collection\",\n    \"placeholder\": \"Add Field\",\n    \"displayOptions\": {\n      \"show\": {\n        \"operation\": [\n          \"editMessageText\",\n          \"sendAnimation\",\n          \"sendAudio\",\n          \"sendDocument\",\n          \"sendLocation\",\n          \"sendMessage\",\n          \"sendMediaGroup\",\n          \"sendPhoto\",\n          \"sendSticker\",\n          \"sendVideo\"\n        ],\n        \"resource\": [\n          \"message\"\n        ]\n      }\n    },\n    \"default\": {},\n    \"options\": [\n      {\n        \"displayName\": \"Append n8n Attribution\",\n        \"name\": \"appendAttribution\",\n        \"type\": \"boolean\",\n        \"default\": true,\n        \"description\": \"Whether to include the phrase ‚ÄúThis message was sent automatically with n8n‚Äù to the end of the message\",\n        \"displayOptions\": {\n          \"show\": {\n            \"/operation\": [\n              \"sendMessage\"\n            ]\n          }\n        }\n      },\n      {\n        \"displayName\": \"Caption\",\n        \"name\": \"caption\",\n        \"type\": \"string\",\n        \"displayOptions\": {\n          \"show\": {\n            \"/operation\": [\n              \"sendAnimation\",\n              \"sendAudio\",\n              \"sendDocument\",\n              \"sendPhoto\",\n              \"sendVideo\"\n            ]\n          }\n        },\n        \"default\": \"\",\n        \"description\": \"Caption text to set, 0-1024 characters\"\n      },\n      {\n        \"displayName\": \"Disable Notification\",\n        \"name\": \"disable_notification\",\n        \"type\": \"boolean\",\n        \"default\": false,\n        \"displayOptions\": {\n          \"hide\": {\n            \"/operation\": [\n              \"editMessageText\"\n            ]\n          }\n        },\n        \"description\": \"Whether to send the message silently. Users will receive a notification with no sound.\"\n      },\n      {\n        \"displayName\": \"Disable WebPage Preview\",\n        \"name\": \"disable_web_page_preview\",\n        \"type\": \"boolean\",\n        \"displayOptions\": {\n          \"show\": {\n            \"/operation\": [\n              \"editMessageText\",\n              \"sendMessage\"\n            ]\n          }\n        },\n        \"default\": false,\n        \"description\": \"Whether to disable link previews for links in this message\"\n      },\n      {\n        \"displayName\": \"Duration\",\n        \"name\": \"duration\",\n        \"type\": \"number\",\n        \"typeOptions\": {\n          \"minValue\": 0\n        },\n        \"displayOptions\": {\n          \"show\": {\n            \"/operation\": [\n              \"sendAnimation\",\n              \"sendAudio\",\n              \"sendVideo\"\n            ]\n          }\n        },\n        \"default\": 0,\n        \"description\": \"Duration of clip in seconds\"\n      },\n      {\n        \"displayName\": \"File Name\",\n        \"name\": \"fileName\",\n        \"type\": \"string\",\n        \"default\": \"\",\n        \"displayOptions\": {\n          \"show\": {\n            \"/operation\": [\n              \"sendAnimation\",\n              \"sendAudio\",\n              \"sendDocument\",\n              \"sendPhoto\",\n              \"sendVideo\",\n              \"sendSticker\"\n            ],\n            \"/resource\": [\n              \"message\"\n            ],\n            \"/binaryData\": [\n              true\n            ]\n          }\n        },\n        \"placeholder\": \"image.jpeg\"\n      },\n      {\n        \"displayName\": \"Height\",\n        \"name\": \"height\",\n        \"type\": \"number\",\n        \"typeOptions\": {\n          \"minValue\": 0\n        },\n        \"displayOptions\": {\n          \"show\": {\n            \"/operation\": [\n              \"sendAnimation\",\n              \"sendVideo\"\n            ]\n          }\n        },\n        \"default\": 0,\n        \"description\": \"Height of the video\"\n      },\n      {\n        \"displayName\": \"Parse Mode\",\n        \"name\": \"parse_mode\",\n        \"type\": \"options\",\n        \"options\": [\n          {\n            \"name\": \"Markdown (Legacy)\",\n            \"value\": \"Markdown\"\n          },\n          {\n            \"name\": \"MarkdownV2\",\n            \"value\": \"MarkdownV2\"\n          },\n          {\n            \"name\": \"HTML\",\n            \"value\": \"HTML\"\n          }\n        ],\n        \"displayOptions\": {\n          \"show\": {\n            \"/operation\": [\n              \"editMessageText\",\n              \"sendAnimation\",\n              \"sendAudio\",\n              \"sendMessage\",\n              \"sendPhoto\",\n              \"sendVideo\",\n              \"sendDocument\"\n            ]\n          }\n        },\n        \"default\": \"HTML\",\n        \"description\": \"How to parse the text\"\n      },\n      {\n        \"displayName\": \"Performer\",\n        \"name\": \"performer\",\n        \"type\": \"string\",\n        \"displayOptions\": {\n          \"show\": {\n            \"/operation\": [\n              \"sendAudio\"\n            ]\n          }\n        },\n        \"default\": \"\",\n        \"description\": \"Name of the performer\"\n      },\n      {\n        \"displayName\": \"Reply To Message ID\",\n        \"name\": \"reply_to_message_id\",\n        \"type\": \"number\",\n        \"displayOptions\": {\n          \"hide\": {\n            \"/operation\": [\n              \"editMessageText\"\n            ]\n          }\n        },\n        \"default\": 0,\n        \"description\": \"If the message is a reply, ID of the original message\"\n      },\n      {\n        \"displayName\": \"Message Thread ID\",\n        \"name\": \"message_thread_id\",\n        \"type\": \"number\",\n        \"displayOptions\": {\n          \"show\": {\n            \"/operation\": [\n              \"sendAnimation\",\n              \"sendAudio\",\n              \"sendChatAction\",\n              \"sendDocument\",\n              \"sendLocation\",\n              \"sendMediaGroup\",\n              \"sendMessage\",\n              \"sendPhoto\",\n              \"sendSticker\",\n              \"sendVideo\"\n            ]\n          }\n        },\n        \"default\": 0,\n        \"description\": \"The unique identifier of the forum topic\"\n      },\n      {\n        \"displayName\": \"Title\",\n        \"name\": \"title\",\n        \"type\": \"string\",\n        \"displayOptions\": {\n          \"show\": {\n            \"/operation\": [\n              \"sendAudio\"\n            ]\n          }\n        },\n        \"default\": \"\",\n        \"description\": \"Title of the track\"\n      },\n      {\n        \"displayName\": \"Thumbnail\",\n        \"name\": \"thumb\",\n        \"type\": \"string\",\n        \"displayOptions\": {\n          \"show\": {\n            \"/operation\": [\n              \"sendAnimation\",\n              \"sendAudio\",\n              \"sendDocument\",\n              \"sendVideo\"\n            ]\n          }\n        },\n        \"default\": \"\",\n        \"description\": \"Thumbnail of the file sent; can be ignored if thumbnail generation for the file is supported server-side. The thumbnail should be in JPEG format and less than 200 kB in size. A thumbnail‚Äòs width and height should not exceed 320.\"\n      },\n      {\n        \"displayName\": \"Width\",\n        \"name\": \"width\",\n        \"type\": \"number\",\n        \"typeOptions\": {\n          \"minValue\": 0\n        },\n        \"displayOptions\": {\n          \"show\": {\n            \"/operation\": [\n              \"sendAnimation\",\n              \"sendVideo\"\n            ]\n          }\n        },\n        \"default\": 0,\n        \"description\": \"Width of the video\"\n      }\n    ]\n  }\n]\n</node_properties_definition>",
								"cache_control": {
									"type": "ephemeral"
								}
							},
							{
								"type": "text",
								"text": "<instance_url>\nThe n8n instance base URL is: http://localhost:TEST_PORT\n\nThis URL is essential for webhook nodes and chat triggers as it provides the base URL for:\n- Webhook URLs that external services need to call\n- Chat trigger URLs for conversational interfaces\n- Any node that requires the full instance URL to generate proper callback URLs\n\nWhen working with webhook or chat trigger nodes, use this URL as the base for constructing proper endpoint URLs.\n</instance_url>"
							}
						]
					},
					{
						"role": "user",
						"content": "\n<current_workflow_json>\n{\"nodes\":[{\"id\":\"node-00000000\",\"name\":\"Daily 8pm Trigger\",\"type\":\"n8n-nodes-base.scheduleTrigger\",\"typeVersion\":1.3,\"position\":[250,450],\"parameters\":{\"rule\":{\"interval\":[{\"field\":\"days\",\"daysInterval\":1,\"triggerAtHour\":20,\"triggerAtMinute\":0}]}}},{\"id\":\"node-00000001\",\"name\":\"Fetch AI News from NewsAPI\",\"type\":\"n8n-nodes-base.httpRequest\",\"typeVersion\":4.4,\"position\":[250,300],\"parameters\":{\"method\":\"GET\",\"url\":\"https://newsapi.org/v2/everything\",\"sendQuery\":true,\"specifyQuery\":\"keypair\",\"queryParameters\":{\"parameters\":[{\"name\":\"q\",\"value\":\"AI OR artificial intelligence\"},{\"name\":\"from\",\"value\":\"={{ $now.minus({days: 1}).toFormat('yyyy-MM-dd') }}\"},{\"name\":\"to\",\"value\":\"={{ $now.toFormat('yyyy-MM-dd') }}\"},{\"name\":\"sortBy\",\"value\":\"popularity\"},{\"name\":\"language\",\"value\":\"en\"}]},\"authentication\":\"none\",\"sendHeaders\":false,\"sendBody\":false,\"options\":{}}},{\"id\":\"node-00000002\",\"name\":\"Top 5 Articles\",\"type\":\"n8n-nodes-base.limit\",\"typeVersion\":1,\"position\":[250,300],\"parameters\":{\"maxItems\":5,\"keep\":\"firstItems\"}},{\"id\":\"node-00000003\",\"name\":\"Extract Top Article\",\"type\":\"n8n-nodes-base.set\",\"typeVersion\":3.4,\"position\":[250,300],\"parameters\":{\"mode\":\"manual\",\"assignments\":{\"assignments\":[{\"id\":\"id-1\",\"name\":\"topArticleTitle\",\"value\":\"={{ $json.title }}\",\"type\":\"string\"},{\"id\":\"id-2\",\"name\":\"topArticleDescription\",\"value\":\"={{ $json.description }}\",\"type\":\"string\"},{\"id\":\"id-3\",\"name\":\"topArticleUrl\",\"value\":\"={{ $json.url }}\",\"type\":\"string\"}]},\"includeOtherFields\":false,\"options\":{}}},{\"id\":\"node-00000004\",\"name\":\"Summarize Articles\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"typeVersion\":3.1,\"position\":[530,300],\"parameters\":{\"hasOutputParser\":false,\"promptType\":\"define\",\"text\":\"=Summarize the following article in exactly two sentences:\\n\\nTitle: {{ $json.title }}\\nDescription: {{ $json.description }}\\nContent: {{ $json.content }}\"}},{\"id\":\"node-00000005\",\"name\":\"OpenAI GPT-4.1-mini\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\"typeVersion\":1.3,\"position\":[474,450],\"parameters\":{\"model\":{\"__rl\":true,\"mode\":\"id\",\"value\":\"gpt-4.1-mini\"}}},{\"id\":\"node-00000006\",\"name\":\"Combine All Summaries\",\"type\":\"n8n-nodes-base.aggregate\",\"typeVersion\":1,\"position\":[530,300],\"parameters\":{\"aggregate\":\"aggregateAllItemData\",\"destinationFieldName\":\"summaries\",\"include\":\"allFields\",\"options\":{}}},{\"id\":\"node-00000007\",\"name\":\"Generate Image\",\"type\":\"@n8n/n8n-nodes-langchain.openAi\",\"typeVersion\":2.1,\"position\":[530,300],\"parameters\":{\"resource\":\"image\",\"operation\":\"generate\",\"model\":\"dall-e-3\",\"prompt\":\"={{ $('Extract Top Article').item.json.topArticleTitle }}: {{ $('Summarize Articles').first().json.output }}\",\"options\":{\"dalleQuality\":\"hd\",\"size\":\"1024x1024\"}}},{\"id\":\"node-00000008\",\"name\":\"Structure Message\",\"type\":\"n8n-nodes-base.set\",\"typeVersion\":3.4,\"position\":[810,300],\"parameters\":{}},{\"id\":\"node-00000009\",\"name\":\"Send to Telegram\",\"type\":\"n8n-nodes-base.telegram\",\"typeVersion\":1.2,\"position\":[810,300],\"parameters\":{\"resource\":\"message\",\"operation\":\"sendPhoto\"},\"webhookId\":\"webhook-00000000\"}],\"connections\":{\"Daily 8pm Trigger\":{\"main\":[[{\"node\":\"Fetch AI News from NewsAPI\",\"type\":\"main\",\"index\":0}]]},\"Fetch AI News from NewsAPI\":{\"main\":[[{\"node\":\"Top 5 Articles\",\"type\":\"main\",\"index\":0}]]},\"Top 5 Articles\":{\"main\":[[{\"node\":\"Extract Top Article\",\"type\":\"main\",\"index\":0},{\"node\":\"Summarize Articles\",\"type\":\"main\",\"index\":0}]]},\"OpenAI GPT-4.1-mini\":{\"ai_languageModel\":[[{\"node\":\"Summarize Articles\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Summarize Articles\":{\"main\":[[{\"node\":\"Combine All Summaries\",\"type\":\"main\",\"index\":0}]]},\"Combine All Summaries\":{\"main\":[[{\"node\":\"Generate Image\",\"type\":\"main\",\"index\":0}]]}},\"name\":\"Daily AI News Digest with Image and Telegram Notification\"}\n</current_workflow_json>\n\n<current_simplified_execution_data>\nNO EXECUTION DATA YET\n</current_simplified_execution_data>\n\n<current_execution_nodes_schemas>\nNO SCHEMA\n</current_execution_nodes_schemas>\n\n<selected_node>\nName: Send to Telegram\nType: n8n-nodes-base.telegram\n\nCurrent Parameters: {\n  \"resource\": \"message\",\n  \"operation\": \"sendPhoto\"\n}\n</selected_node>\n\n<requested_changes>\n1. Set the chatId to <__PLACEHOLDER_VALUE__telegram_chat_id__>\n2. Set the photo to ={{ $json.imageUrl }}\n3. Set the caption to ={{ $json.messageText }}\n4. Set the parse mode to Markdown\n</requested_changes>\n\nBased on the requested changes and the node's property definitions, return the complete updated parameters object."
					}
				],
				"system": [
					{
						"type": "text",
						"text": "<core_instructions>\nYou are an expert n8n workflow architect who updates node parameters based on natural language instructions.\n\n## Your Task\nUpdate the parameters of an existing n8n node based on the requested changes. Return the COMPLETE parameters object with both modified and unmodified parameters. Only modify the parameters that are explicitly mentioned in the changes, preserving all other existing parameters exactly as they are.\n\n## Reference Information\nYou will receive:\n1. The original user workflow request\n2. The current workflow JSON\n3. The selected node's current configuration (id, name, type, parameters)\n4. The node type's parameter definitions\n5. Natural language changes to apply\n\n## Parameter Update Guidelines\n1. START WITH CURRENT: If current parameters is empty {}, start with an empty object and add the requested parameters\n2. PRESERVE EXISTING VALUES: Only modify parameters mentioned in the requested changes\n3. MAINTAIN STRUCTURE: Keep the exact parameter structure required by the node type\n4. CHECK FOR RESOURCELOCATOR: If a parameter is type 'resourceLocator' in the node definition, it MUST use the ResourceLocator structure with __rl, mode, and value fields\n5. USE PROPER EXPRESSIONS: Follow n8n expression syntax when referencing other nodes\n6. VALIDATE TYPES: Ensure parameter values match their expected types\n7. HANDLE NESTED PARAMETERS: Correctly update nested structures like headers, conditions, etc.\n8. SIMPLE VALUES: For simple parameter updates like \"Set X to Y\", directly set the parameter without unnecessary nesting\n9. GENERATE IDS: When adding new items to arrays (like assignments, headers, etc.), generate unique IDs using a simple pattern like \"id-1\", \"id-2\", etc.\n10. TOOL NODE DETECTION: Check if node type ends with \"Tool\" to determine if $fromAI expressions are available\n11. PLACEHOLDER FORMAT: When changes specify a placeholder, copy it exactly as \"<__PLACEHOLDER_VALUE__VALUE_LABEL__>\" (no extra quotes or expressions) and keep VALUE_LABEL descriptive for the user\n</core_instructions>\n\n<expression_rules>\n\n## CRITICAL: Correctly Formatting n8n Expressions\nWhen using expressions to reference data from other nodes:\n- ALWAYS use the format: `={{ $('Node Name').item.json.field }}`\n- NEVER omit the equals sign before the double curly braces\n- ALWAYS use DOUBLE curly braces, never single\n- NEVER use emojis or special characters inside expressions as they will break the expression\n- INCORRECT: `{ $('Node Name').item.json.field }` (missing =, single braces)\n- INCORRECT: `{{ $('Node Name').item.json.field }}` (missing =)\n- INCORRECT: `={{ $('üëç Node').item.json.field }}` (contains emoji)\n- CORRECT: `={{ $('Previous Node').item.json.field }}`\n</expression_rules>\n\n<guide>\n\n## IMPORTANT: ResourceLocator Parameter Handling\n\nResourceLocator parameters are special fields used for selecting resources like Slack channels, Google Drive files, Notion pages, etc. They MUST have a specific structure:\n\n### Required ResourceLocator Structure (required fields):\n```json\n{\n  \"__rl\": true,\n  \"mode\": \"id\" | \"url\" | \"list\" | \"name\",\n  \"value\": \"the-actual-value\"\n}\n```\n\n### Mode Detection Guidelines:\n- Use the node type definition to determine the default mode and available modes for specific parameter\n- Prefer default mode from node type definition when possible\n- Switch the mode based on the input value format when necessary\n- Use mode \"list\" when the value is an ID + display name (e.g. \"Marketing Team (ID: C0122KQ70S7E)\"). Value should be set to the ID part, and cachedResultName to the display name part\n- Use mode \"url\" when the value is a URL (starts with http:// or https://)\n- Use mode \"id\" when the value looks like an ID (alphanumeric string, UUID, or other identifier)\n\nList mode structure with optional cached fields:\n```json\n{\n  \"__rl\": true,\n  \"mode\": \"list\",\n  \"value\": \"actual-id-from-list\",\n  \"cachedResultName\": \"Display Name\"\n}\n```\n\n</guide>\n\n<guide>\n\n## Text Field Expression Formatting\n\n### PREFERRED METHOD: Embedding expressions directly within text\n```\n\"text\": \"=ALERT: It is currently {{ $('Weather Node').item.json.weather }} in {{ $('Weather Node').item.json.city }}!\"\n```\n\n### Alternative method: Using string concatenation (use only when needed)\n```\n\"text\": \"={{ 'ALERT: It is currently ' + $('Weather Node').item.json.weather + ' in ' + $('Weather Node').item.json.city + '!' }}\"\n```\n\n### Key Points:\n- Use the embedded expression format when mixing static text with dynamic values\n- The entire string must start with = when using expressions\n- Expressions within text use single curly braces {{ }}\n- The outer expression wrapper uses double curly braces ={{ }}\n</guide>\n\n<guide>\n\n### Referencing Output from Special Node Types\n\n#### AI Agent Output Structure\nAI Agent nodes (n8n-nodes-langchain.agent) wrap their response in an \"output\" object:\n- Without Structured Output Parser: Use `$json.output` to access the response string\n- With Structured Output Parser (hasOutputParser: true in node settings): Use `$json.output.fieldName` to access parsed fields\n- Use `$('AI Agent').item.json.output.fieldName` when referencing a node, instead of `$('AI Agent').item.json.fieldName`\n- WRONG: `$json.summary` ‚Üí CORRECT: `$json.output.summary`\n\n#### Webhook Node Output Structure\nWhen referencing data from a Webhook node (n8n-nodes-base.webhook), the incoming request is structured under `$json`:\n- `$json.headers` - HTTP headers, example: `$json.headers.authorization`\n- `$json.params` - URL path parameters, example route: `/users/:id`, access: `$json.params.id`\n- `$json.query` - Query string parameters, example URL: `?user_id=123`, access: `$json.query.user_id`\n- `$json.body` - Request payload, example JSON: `{ \"userName\": \"sam\" }`, access: `$json.body.userName`\n\nCRITICAL: When referencing data from a Webhook node, do NOT use `$json.fieldName` directly - always specify the container (body, query, params, or headers).\n</guide>\n\n<common_patterns>\n\n## Common Parameter Update Patterns\n\n### HTTP Request Node Updates\n- URL: Set directly or use expressions\n- Method: GET, POST, PUT, DELETE, etc.\n- Headers: Add/update in headerParameters.parameters array\n- Body: Update bodyParameters.parameters for POST/PUT\n- Authentication: Update authentication settings\n</common_patterns>\n\n<examples>\n\n## Examples of Parameter Updates\n\n### Example 1: Update HTTP Request URL\nChange: \"Set the URL to call the weather API for London\"\nCurrent parameters: { \"url\": \"https://api.example.com\", \"method\": \"GET\" }\nUpdated parameters: { \"url\": \"https://api.openweathermap.org/data/2.5/weather?q=London\", \"method\": \"GET\" }\n\n### Example 2: Add a header\nChange: \"Add an ABC key header with value 123\"\nCurrent parameters: { \"url\": \"...\", \"sendHeaders\": false }\nUpdated parameters: {\n  \"url\": \"...\",\n  \"sendHeaders\": true,\n  \"headerParameters\": {\n    \"parameters\": [\n      {\n        \"name\": \"ABC\",\n        \"value\": \"123\"\n      }\n    ]\n  }\n}\n\n### Example 3: Update condition\nChange: \"Check if temperature is above 25 degrees\"\nCurrent parameters: { \"conditions\": { \"conditions\": [] } }\nUpdated parameters: {\n  \"conditions\": {\n    \"options\": {\n      \"caseSensitive\": false,\n      \"leftValue\": \"\",\n      \"typeValidation\": \"loose\"\n    },\n    \"conditions\": [\n      {\n        \"leftValue\": \"={{ $('Weather Node').item.json.main.temp }}\",\n        \"rightValue\": 25,\n        \"operator\": {\n          \"type\": \"number\",\n          \"operation\": \"gt\"\n        }\n      }\n    ],\n    \"combinator\": \"and\"\n  }\n}\n\n\n### ResourceLocator Examples\n\n#### Example 1: Slack Node - Channel by ID\nCurrent Parameters:\n{\n  \"select\": \"channel\",\n  \"channelId\": {\n    \"__rl\": true,\n    \"value\": \"\",\n    \"mode\": \"list\"\n  },\n  \"otherOptions\": {}\n}\n\nRequested Changes: Send to channel C0122KQ70S7E\n\nExpected Output:\n{\n  \"select\": \"channel\",\n  \"channelId\": {\n    \"__rl\": true,\n    \"mode\": \"id\",\n    \"value\": \"C0122KQ70S7E\"\n  },\n  \"otherOptions\": {}\n}\n\n#### Example 2: Slack Node - Channel by name\nCurrent Parameters:\n{\n  \"select\": \"channel\",\n  \"channelId\": {\n    \"__rl\": true,\n    \"value\": \"\",\n    \"mode\": \"list\"\n  },\n  \"otherOptions\": {}\n}\n\nRequested Changes: Set channel to general (ID: C0A45D6GBLD)\n\nExpected Output:\n{\n  \"select\": \"channel\",\n  \"channelId\": {\n    \"__rl\": true,\n    \"mode\": \"list\",\n\t\t\"value\": \"C0A45D6GBLD\",\n\t\t\"cachedResultName\": \"general\"\n  },\n  \"otherOptions\": {}\n}\n\n#### Example 3: Google Sheets Node - Spreadsheet by name\nCurrent Parameters:\n{\n  \"operation\": \"read\",\n  \"documentId\": {\n    \"__rl\": true,\n    \"value\": \"\",\n    \"mode\": \"list\"\n  },\n  \"sheetName\": {\n    \"__rl\": true,\n    \"value\": \"\",\n    \"mode\": \"list\"\n  }\n}\n\nRequested Changes: Use the \"Sales Report 2024\" spreadsheet and \"Q1 Data\" sheet\n\nExpected Output:\n{\n  \"operation\": \"read\",\n  \"documentId\": {\n    \"__rl\": true,\n    \"mode\": \"list\",\n    \"value\": \"2wtaOwM07OTFmEijOVvzDAlxtR76hBYVBRlIwuUgDsVE\",\n    \"cachedResultName\": \"Sales Report 2024\",\n    \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/2wtaOwM07OTFmEijOVvzDAlxtR76hBYVBRlIwuUgDsVE/edit?usp=drivesdk\"\n    \n  },\n  \"sheetName\": {\n    \"__rl\": true,\n    \"mode\": \"list\",\n    \"value\": \"gid=0\",\n    \"cachedResultName\": \"Q1 Data\"\n    \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/2wtaOwM07OTFmEijOVvzDAlxtR76hBYVBRlIwuUgDsVE/edit#gid=0\"\n  }\n}\n\n#### Example 4: Google Drive Node - File by URL\nCurrent Parameters:\n{\n  \"operation\": \"download\",\n  \"fileId\": {\n    \"__rl\": true,\n    \"value\": \"\",\n    \"mode\": \"list\"\n  }\n}\n\nRequested Changes: Use file https://drive.google.com/file/d/1ABC123XYZ/view\n\nExpected Output:\n{\n  \"operation\": \"download\",\n  \"fileId\": {\n    \"__rl\": true,\n    \"mode\": \"url\",\n    \"value\": \"https://drive.google.com/file/d/1ABC123XYZ/view\"\n  }\n}\n\n#### Example 5: Notion Node - Page ID from Expression\nCurrent Parameters:\n{\n  \"resource\": \"databasePage\",\n  \"operation\": \"get\",\n  \"pageId\": {\n    \"__rl\": true,\n    \"value\": \"hardcoded-page-id\",\n    \"mode\": \"id\"\n  }\n}\n\nRequested Changes: Use page ID from the previous node's output\n\nExpected Output:\n{\n  \"resource\": \"databasePage\",\n  \"operation\": \"get\",\n  \"pageId\": {\n    \"__rl\": true,\n    \"mode\": \"id\",\n    \"value\": \"={{ $('Previous Node').item.json.pageId }}\"\n  }\n}\n\n#### Example 6: Mode Switch - From ID to List\nCurrent Parameters:\n{\n  \"operation\": \"append\",\n  \"documentId\": {\n    \"__rl\": true,\n    \"value\": \"1ABC123XYZ\",\n    \"mode\": \"id\"\n  }\n}\n\nRequested Changes: Use the \"Customer Database\" (ID: 9XYZ789DEF) spreadsheet\n\nExpected Output:\n{\n  \"operation\": \"append\",\n  \"documentId\": {\n    \"__rl\": true,\n    \"mode\": \"list\",\n    \"value\": \"9XYZ789DEF\",\n    \"cachedResultName\": \"Customer Database\"\n  }\n}\n</examples>\n\n<output_format>\n\n## Output Format\nReturn ONLY the complete updated parameters object that matches the node's parameter structure. Include ALL parameters, both modified and unmodified.\n</output_format>",
						"cache_control": {
							"type": "ephemeral"
						}
					}
				]
			}
		}
	},
	"httpResponse": {
		"statusCode": 200,
		"reasonPhrase": "OK",
		"headers": {
			"strict-transport-security": ["max-age=31536000; includeSubDomains; preload"],
			"X-Robots-Tag": ["none"],
			"Server": ["cloudflare"],
			"Content-Type": ["application/json"],
			"Content-Security-Policy": ["default-src 'none'; frame-ancestors 'none'"]
		},
		"body": {
			"contentType": "application/json",
			"type": "JSON",
			"json": {
				"model": "claude-sonnet-4-5-20250929",
				"id": "msg_01Fq2iWGFjWUYzW44wByKZMj",
				"type": "message",
				"role": "assistant",
				"content": [
					{
						"type": "tool_use",
						"id": "toolu_01Q1WtVY88zoCWWLP4qXJ27u",
						"name": "extract",
						"input": {
							"parameters": {
								"resource": "message",
								"operation": "sendPhoto",
								"chatId": "<__PLACEHOLDER_VALUE__telegram_chat_id__>",
								"binaryData": false,
								"file": "={{ $json.imageUrl }}",
								"replyMarkup": "none",
								"additionalFields": {
									"caption": "={{ $json.messageText }}",
									"parse_mode": "Markdown"
								}
							}
						}
					}
				],
				"stop_reason": "tool_use",
				"stop_sequence": null,
				"usage": {
					"input_tokens": 1569,
					"cache_creation_input_tokens": 6743,
					"cache_read_input_tokens": 3783,
					"cache_creation": {
						"ephemeral_5m_input_tokens": 6743,
						"ephemeral_1h_input_tokens": 0
					},
					"output_tokens": 142,
					"service_tier": "standard"
				}
			}
		}
	},
	"id": "1770043415985-unknown-host-POST-_v1_messages-8eeb3874.json",
	"priority": 0,
	"timeToLive": {
		"unlimited": true
	},
	"times": {
		"unlimited": true
	}
}
